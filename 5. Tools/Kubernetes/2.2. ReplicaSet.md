#tool #tool-k8s

---
**ReplicaSet** — контроллер, поддерживающий заданное число реплик определённых Pod-ов в любое время. 
**Селекторы** — определяют, какие Pod-ы находятся под управлением конкретного RS. 
Типы селекторов:
1. На основе равенства - по точному значению метки Pod-а (например, `app=nginx`).
2. На основе набора - одно из значений в наборе (например, `environment in (production, staging)`).

> Если создать новый Pod с метками, подходящими под селектор существующего RS, этот Pod будет взят под управление данным RS, даже если не был создан им изначально.

### **Управление числом реплик**:
> В большинстве случаев рекомендуется использовать **Deployment**, который управляет RS и предоставляет дополнительные возможности, такие как обновления и откаты приложений.

1. Чтобы изменить количество реплик необходимо обновить поле `spec.replicas` в манифесте RS. 
	```yaml
	apiVersion: apps/v1
	kind: ReplicaSet
	metadata:
	  name: myapp-replicaset
	spec:
	  replicas: 5
	  selector:
	    matchLabels:
	      app: myapp
	  template:
	    metadata:
	      labels:
	        app: myapp
	    spec:
	      containers:
	      - name: myapp-container
	        image: myapp:1.0
	```
2. После внесения изменений примените обновлённый манифест командой:
	```bash
	kubectl apply -f your-replicaset.yaml
	```

> ##### ReplicationController vs ReplicaSet:
> 
> **ReplicationController** — это первоначальный контроллер в Kubernetes (заменяется на ReplicaSet), обеспечивающий поддержание заданного количества идентичных Pod. 
> 
> - ReplicationController - поддерживает только селекторы на основе равенства.
> - ReplicaSet - как на основе равенства, так и на основе набора.

### Outer links:
- [ReplicationController и ReplicaSet в Kubernetes](https://www.youtube.com/watch?v=jfAqUmQQPow)
- [Официальная документация Kubernetes: ReplicaSet](https://kubernetes.io/ru/docs/concepts/workloads/controllers/replicaset/)
- [Статья на Selectel: "Kubernetes: большой обзор технологии, установка и настройка"](https://selectel.ru/blog/kubernetes-review/)

