#tool #tool-k8s

---
**Kubernetes** (часто сокращаемый как **K8s**) — open-source платформа для работы с высоконагруженными распределёнными контейнеризированными приложениями. 
Обеспечивает ==автоматизацию *развертывания*, *масштабирования* и *управления*== контейнерами.

Преимущества:
- <font color="#e36c09">Эффективное использование ресурсов (контроль нагрузки)</font>
- <font color="#e36c09">Снижение затрат на администрирование (зп администраторам)</font>
- <font color="#e36c09">Экономия на инфраструктуре (дешевое железо)</font>
- <font color="#e36c09">Программируемая инфраструктура (версионирование, скорость развертки)</font>

Функции:
- <font color="#e36c09">Управление контейнерами</font>: Оркестрация и запуск контейнеров в *кластере*.
- <font color="#e36c09">Балансировка нагрузки</font>: Распределение сетевого трафика между контейнерами.
- <font color="#e36c09">Масштабирование</font>: Автоматическая регулировка количества реплик приложений.
- <font color="#e36c09">Обнаружение сервисов и управление конфигурацией</font>: Автоматическое назначение DNS имен и управление настройками приложений.
- <font color="#e36c09">Самовосстановление</font>: Перезапуск упавших контейнеров, замена или отключение неработоспособных узлов.


### Архитектура K8s

- **Кластер** - Набор *узлов* (Nodes), объединенных для совместной работы.
    - **Control Plane (управляющий уровень)** — управляет кластером.
		1. **API-сервер** — предоставляет RESTful API для взаимодействия компонентов.
		2. **ETCD** — распределённая база данных для хранения текущего и целевого состояния кластера.
		3. **Controller Manager** — контролирует состояние кластера и приводит его к заданному целевому состоянию.
		4. **Scheduler (планировщик)** — выбирает, на каком Worker Node запустить новый Pod.
    
	-  **Compute Nodes (рабочие узлы, Worker Nodes)** — Отдельная машина (физическая или виртуальная), на которой запускаются компоненты Kubernetes и контейнеры приложений. 
		1. **Docker** (или другая платформа) — выполняет контейнеры.
		2. **Kubelet** — следит за тем, чтобы контейнеры на узле работали.
		3. **Kube-proxy** — управляет сетевым трафиком, маршрутизацией и балансировкой нагрузки.
		4. **Под** — это один или несколько логически связанных контейнеров. Контейнеры в одном Pod могут взаимодействовать через `localhost`, делят общую память. Контейнеры в разных Pod изолированы друг от друга.

### Объекты

**Namespace (Пространство имён)** — механизм разделения ресурсов внутри кластера на логические группы для изоляции и организации.
> Например, можно создать отдельные пространства имён для разработки и продакшена.

---
**Deployment (Развёртывание)** —  контроллер управления развертыванием и обновлением Pod'ов. Включает в себя описание желаемого состояния приложения (количество реплик, используемые образы контейнеров, стратегии обновления). 
> Например, при необходимости обновить версию приложения, достаточно изменить образ контейнера в *манифесте Deployment*.

---
**Service (Сервис)** — логический набор Pod'ов и политика доступа к ним. Предоставляет стабильную точку входа с постоянным IP-адресом или DNS-именем. 
Типы: 
	- *ClusterIP* (доступ внутри кластера), 
	- *NodePort* (доступ через определённый порт на каждом узле), 
	- *LoadBalancer* (интеграция с внешними балансировщиками нагрузки). 

> *Deployment* разворачивает и управляет набором Pod'ов в определённом *Namespace*. Для обеспечения доступа к этим Pod'ам создаётся *Service*, который также находится в том же *Namespace*. Таким образом, *Namespace* обеспечивает изоляцию, *Deployment* — управление жизненным циклом приложений, а *Service* — стабильный доступ к ним.

---
### Варианты настройки

- **Локальная установка**: Для изучения и тестирования можно использовать *Minikube*, который разворачивает однузловой кластер на локальной машине.
- **Облачные решения**: Многие провайдеры, такие как *Google Kubernetes Engine (GKE)*, *Amazon Elastic Kubernetes Service (EKS)* и *Azure Kubernetes Service (AKS)*, предлагают управляемые кластеры Kubernetes.
    


    





### Outer links:
[Курс по Kubernetes для Начинающих](https://www.youtube.com/watch?v=hNLQ3tCP8jQ)
