
# –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å

**–ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å (Visitor)** ‚Äî —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫ –æ–±—ä–µ–∫—Ç–∞–º, –Ω–µ –∏–∑–º–µ–Ω—è—è –∏—Ö –∫–ª–∞—Å—Å—ã. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤ —Å–∞–º–∏ –∫–ª–∞—Å—Å—ã –æ–±—ä–µ–∫—Ç–æ–≤, —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–ª–∞—Å—Å –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π "–ø–æ—Å–µ—â–∞–µ—Ç" –æ–±—ä–µ–∫—Ç—ã –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏.

üìå –ö–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è:  
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–±—ä–µ–∫—Ç–æ–≤, –Ω–µ –º–µ–Ω—è—è —Å–∞–º–∏ –æ–±—ä–µ–∫—Ç—ã.  
- –ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞.  
- –ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –∏—Ö –∫–ª–∞—Å—Å–æ–≤.

üìå –°—É—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–∞:  
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Visitor`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞–∂–¥—ã–º —Ç–∏–ø–æ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–±—ä–µ–∫—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥ `Accept()`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è –∏ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –µ–º—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

üìå –í—ã–≥–æ–¥–∞:  
‚úîÔ∏è –õ–µ–≥–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤  
‚úîÔ∏è –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞ –∑–∞ —Å—á—ë—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä  
‚úîÔ∏è –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å–ª–æ–≤–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ç–∏–ø–æ–≤ –≤ –∫–æ–¥–µ

---
#### –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –Ω–∞ C#:
–í —ç—Ç–æ–º –∫–æ–¥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (`Book` –∏ `DVD`), –∏ –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥ `Accept()`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ –¥–ª—è —ç—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.

```csharp
// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è
interface IVisitor
{
    void Visit(Book book);
    void Visit(DVD dvd);
}

// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
abstract class Product
{
    public string Name { get; set; }

    public abstract void Accept(IVisitor visitor);
}

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
class Book : Product
{
    public int Pages { get; set; }

    public override void Accept(IVisitor visitor) => visitor.Visit(this);
}

// –î—Ä—É–≥–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
class DVD : Product
{
    public int Duration { get; set; }

    public override void Accept(IVisitor visitor) => visitor.Visit(this);
}

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å
class PriceCalculator : IVisitor
{
    public void Visit(Book book) => Console.WriteLine($"–¶–µ–Ω–∞ –∫–Ω–∏–≥–∏ '{book.Name}' = 15$");
    public void Visit(DVD dvd) => Console.WriteLine($"–¶–µ–Ω–∞ DVD '{dvd.Name}' = 20$");
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
class Program
{
    static void Main()
    {
        var book = new Book { Name = "C# for Beginners", Pages = 300 };
        var dvd = new DVD { Name = "C# Tutorial", Duration = 120 };

        var priceCalculator = new PriceCalculator();
        
        book.Accept(priceCalculator);  // –¶–µ–Ω–∞ –∫–Ω–∏–≥–∏
        dvd.Accept(priceCalculator);   // –¶–µ–Ω–∞ DVD
    }
}
````

### Outer links:
https://metanit.com/sharp/patterns/3.11.php