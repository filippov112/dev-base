
# –ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–µ—Ü

**–ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–µ—Ü (Flyweight)** ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∑–∞ —Å—á—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤, —Ä–∞–∑–¥–µ–ª—è–µ–º—ã—Ö –º–µ–∂–¥—É –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤. –û–Ω –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è.

üìå –ö–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è:  
- –ï—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤, –∑–∞–Ω–∏–º–∞—é—â–∏—Ö –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏.
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø–∞–º—è—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –æ–±—â–∏–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
- –ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –æ–±—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤.

üìå –°—É—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–∞:  
–ü–∞—Ç—Ç–µ—Ä–Ω –¥–µ–ª–∏—Ç –æ–±—ä–µ–∫—Ç—ã –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏: –≤–Ω–µ—à–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–µ –∏ –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω–æ–µ) –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞). –í–Ω–µ—à–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–µ–ª–∏—Ç—Å—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, –∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ.

üìå –í—ã–≥–æ–¥–∞:  
‚úîÔ∏è –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤  
‚úîÔ∏è –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∑–∞ —Å—á—ë—Ç —É–º–µ–Ω—å—à–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤  
‚úîÔ∏è –£–ø—Ä–æ—â–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

---
#### –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –Ω–∞ C#:
–í —ç—Ç–æ–º –∫–æ–¥–µ –ø–∞—Ç—Ç–µ—Ä–Ω **–ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–µ—Ü** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –¥–µ—Ä–µ–≤—å–µ–≤, –≥–¥–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¥–µ—Ä–µ–≤–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ —Ç–∏–ø –∏ —Ü–≤–µ—Ç, –¥–µ–ª—è—Ç—Å—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏, –∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∑–∏—Ü–∏—è) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.

```csharp
// –ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–µ—Ü: –æ–±—â–∏–π –æ–±—ä–µ–∫—Ç
class TreeType
{
    public string Name { get; }
    public string Color { get; }

    public TreeType(string name, string color)
    {
        Name = name;
        Color = color;
    }

    public void Display(int x, int y)
    {
        Console.WriteLine($"Tree: {Name}, Color: {Color}, Location: ({x}, {y})");
    }
}

// –ö–æ–Ω—Ç–µ–∫—Å—Ç: –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
class Tree
{
    public TreeType Type { get; }
    public int X { get; }
    public int Y { get; }

    public Tree(TreeType type, int x, int y)
    {
        Type = type;
        X = x;
        Y = y;
    }

    public void Display()
    {
        Type.Display(X, Y);
    }
}

// –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –¥–µ—Ä–µ–≤—å–µ–≤
class TreeFactory
{
    private readonly Dictionary<string, TreeType> _treeTypes = new();

    public TreeType GetTreeType(string name, string color)
    {
        string key = $"{name}-{color}";
        if (!_treeTypes.ContainsKey(key))
        {
            _treeTypes[key] = new TreeType(name, color);
        }
        return _treeTypes[key];
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
class Program
{
    static void Main()
    {
        TreeFactory treeFactory = new TreeFactory();

        // –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ä–µ–≤—å–µ–≤ —Å –æ–±—â–∏–º–∏ —Ç–∏–ø–∞–º–∏
        TreeType oak = treeFactory.GetTreeType("Oak", "Green");
        TreeType pine = treeFactory.GetTreeType("Pine", "Dark Green");

        Tree tree1 = new Tree(oak, 10, 20);
        Tree tree2 = new Tree(pine, 30, 40);
        Tree tree3 = new Tree(oak, 50, 60);

        tree1.Display();
        tree2.Display();
        tree3.Display();
    }
}
````

### Outer links:
https://metanit.com/sharp/patterns/4.7.php