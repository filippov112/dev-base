

# Нормализация БД

**Нормализация**  — процесс минимизации избыточности данных и избегания аномалий при работе с базой. 

**Нормальные формы:**
Каждая последующая форма подразумевает соблюдение всех предыдущих форм.

1. <font color="#95b3d7">Нулевая форма (**0NF**)</font>
	- На этой стадии данные могут быть организованы без каких-либо строгих правил — например, это может быть таблица с повторяющимися группами или списками. **Ненормализованная форма** (0NF) — это начальный этап, когда данные просто собраны в таблицу без какой-либо нормализации.
2. <font color="#95b3d7">Первая нормальная форма (**1NF**)</font>
	- Атомарность значений аттрибутов.
	- Отсутствие дубликатов строк.
	- Однотипность данных в пределах столбца.
3. <font color="#95b3d7">Вторая нормальная форма (**2NF**)</font>
	- Неключевые атрибуты зависят от **всего** первичного ключа, а не от его части (частный случай для таблиц с составными ключами).
	- Часть -> Неключ.
4. <font color="#95b3d7">Третья нормальная форма (**3NF**)</font>
	- Отсутствие **транзитивных (незапланированных) зависимостей**, т.е. неключевые атрибуты не зависят друг от друга.
	- Неключ -> Неключ
5. <font color="#95b3d7">Бойс-Кодд нормальная форма (**BCNF**)</font>
	- Зависимости любых аттрибутов должны исходить только от суперключа.
	- Неключ -> Ключ
6. <font color="#95b3d7">Четвёртая нормальная форма (**4NF**)</font>
	- Атомарность-2. Многозначные поля (поля-массивы) должны быть вынесены в отдельные таблицы.
7. <font color="#95b3d7">Пятая нормальная форма (**5NF**)</font>
	- Устраняются **зависимости соединений** (join dependencies).
	- 5NF гарантирует, что любое разделение таблиц, порождает проблемы при восстановлении исходной таблицы путем join-ов.
8. <font color="#95b3d7">Доменно-ключевая нормальная форма (**DKNF**)</font>
	- Ограничения в таблице должны определяться только доменами и ключами.

### <font color="#ffff00">Выбор нормальной формы</font>

**Чем больше нормализация**, тем больше будет разбиений на таблицы и соответственно увеличится количество операций соединения (JOIN), что может снизить производительность при больших объемах данных.
- Если вам важнее **избежать избыточности** и упростить обновление данных — ориентируйтесь на более высокие уровни нормализации (3NF и выше).
- Если ваша база данных будет **интенсивно использоваться для чтения**, и соединения могут замедлять работу, иногда можно пожертвовать полной нормализацией (например, оставить 2NF или 3NF) ради повышения производительности.

> [!note] Положительные и отрицательные факторы необходимости нормализации
> - Будут ли данные <font color="#00b050">часто обновляться</font> или основное использование будет связано с <font color="#ff0000">чтением данных</font>?
> - Какова сложность и структура данных (например, есть ли иерархии, <font color="#00b050">сложные зависимости</font>)?
> - Насколько <font color="#ff0000">критична производительность</font> (нужно ли минимизировать количество соединений между таблицами)?
> - Каковы основные аномалии, которые нужно избежать (например, <font color="#00b050">дублирование, аномалии обновления</font>)?

- **1NF** и **2NF** — это обязательные шаги для нормализации почти любой реляционной базы данных. Они устраняют дублирование данных и частичные зависимости.
- **3NF** и **BCNF** — важны для устранения транзитивных зависимостей и сложных составных ключей. Это наиболее распространённые уровни нормализации, которые обеспечивают хорошую структуру данных в большинстве случаев.
- **4NF** и **5NF** — полезны только в сложных ситуациях с многозначными зависимостями и сложными схемами данных, где данные могут быть избыточными или не могут быть правильно соединены.

1. 1NF
	- Когда есть дублирующиеся записи.
	- Если критична атомарность значений.
2. 2NF
	- Когда у вас есть составные ключи (ключи, состоящие из нескольких столбцов).
	- Если вам нужно устранить ситуации, когда один **неключевой** атрибут зависит только от **части ключа**. 
3. 3NF
	- Когда у вас появляются транзитивные зависимости (когда один **неключевой** атрибут зависит от другого **неключевого** атрибута).
	- Если вы хотите предотвратить аномалии обновления, например, когда изменение одного атрибута требует изменений в нескольких строках.
4. BCNF
	- Когда у вас есть зависимости, в которых **неключевый** атрибут определяет **другой(ключ)** атрибут. 
5. 4NF
	- Если в таблице появляются ситуации, когда один атрибут зависит от другого, а они оба зависят от ключа, но никак не связаны друг с другом.
6. 5NF
	- Если ваша таблица может быть разбита на несколько частей, но после соединения этих частей снова появляются лишние данные или избыточные строки.
