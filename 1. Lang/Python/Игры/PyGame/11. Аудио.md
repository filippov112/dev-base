#lang #lang-python 

---
В библиотеке Pygame для работы со звуком имеются два модуля:
- **pygame.mixer** – для работы со звуковыми эффектами;
- **pygame.mixer.music** – для добавления фоновой музыки.

Полная их документация доступна по адресам:
- [Документация pygame.mixer](https://www.pygame.org/docs/ref/mixer.html)
- [Документация pygame.mixer.music](https://www.pygame.org/docs/ref/music.html)

---

## pygame.mixer.music

### Основные функции

- `pygame.mixer.music.load("sounds/bird.mp3")` — загрузка файла
- `pygame.mixer.music.play(-1)` — воспроизведение

  ```
  play(loops=0, start=0.0, fade_ms=0)
  ```

  - **loops** – число повторений (0 – проигрывать один раз, 1 – два раза и т.д., -1 – бесконечное повторение);
  - **start** – начальное время проигрывания файла (в секундах);
  - **fade_ms** – затухание звука при окончании проигрывания (в мс)

### Управление воспроизведением

- `pygame.mixer.music.pause()` — пауза
- `pygame.mixer.music.unpause()` — продолжение воспроизведения
- `pygame.mixer.music.stop()` — остановка
- `pygame.mixer.music.rewind()` — начать с начала
- `pygame.mixer.music.set_volume(vol)` — установка уровня громкости (float 0-1)
- `pygame.mixer.music.get_volume()` — текущий уровень громкости

---

## pygame.mixer

### Инициализация и настройка модуля

1. Инициализация:
   ```
   init(frequency=44100, size=-16, channels=2, buffer=512, devicename=None, allowedchanges=AUDIO_ALLOW_FREQUENCY_CHANGE | AUDIO_ALLOW_CHANNELS_CHANGE)
   ```

2. Предварительная инициализация:
   ```
   pre_init(frequency=44100, size=-16, channels=2, buffer=512, devicename=None)
   ```

   - **frequency** – частота воспроизведения звуковых файлов;
   - **size** – число бит для представления аудио данных (знак минус говорит, что используются знаковые числа);
   - **channels** – число каналов;
   - **buffer** – размер буфера (в байтах);
   - **allowedchanges** – дополнительные флаговые настройки.

Функция `init` вызывается автоматически при инициализации Pygame (с аргументами по умолчанию):

```python
pygame.init()
```

Если нужно поменять эти параметры, то следует до `pygame.init` вызвать метод `pygame.pre_init()` с нужным набором параметров:

```python
pygame.mixer.pre_init(44100, -16, 1, 512)
pygame.init()
```

---

## Загрузка звуковых файлов

```python
s = pygame.mixer.Sound("sounds/catch.ogg")  # загрузка файла (wav или ogg)
```

### Методы Sound

- `play(loops=0, maxtime=0, fade_ms=0)` — воспроизведение звука;
- `stop()` — останов воспроизведения;
- `set_volume(value)` — настройка громкости звучания;
- `get_volume()` — возвращает текущее значение громкости (число от 0 до 1).

**Sound** не содержит методов для пауз, весь этот функционал выносится на уровень канала или миксера в целом. Каждый звук работает в своем отдельном канале.

Для получения ссылки на канал:

```python
ch = s.play()  # play возвращает ссылку на канал, в котором происходит воспроизведение
```

И далее, уже через переменную `ch` можно вызывать методы канала:

- `ch.stop()` — остановить воспроизведение;
- `ch.pause()` — пауза воспроизведения;
- `ch.unpause()` — снятие с паузы.

Если же мы хотим поставить на паузу все каналы, то следует вызвать такую же функцию на уровне всего микшера:

```python
pygame.mixer.pause()  # или s.pause()
```
