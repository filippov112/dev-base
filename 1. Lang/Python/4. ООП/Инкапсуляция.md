#lang #lang-python

---
## Степени доступа атрибутов
- `<name>` - public
- `_<name>` - protected (только внутри класса и во всех дочерних)
- `__<name>` - private (только внутри класса)

Степени доступа могут относиться как к атрибутам, так и к методам класса.

## Сеттеры и геттеры

Сеттеры и геттеры - методы устанавливающие (set) и возвращающие (get) атрибуты объекта класса.

## Приватный метод класса

```python
def __function(x):
    # если мы не взаимодействуем с объектом класса, то self не нужен
    # ...
    return x  # True\False
```

`Person.__function(x)` - обращение к приватному методу класса происходит только через класс.

## Обращение к приватным атрибутам и методам

- `_<имя класса><имя аттр. или мет.(полное)>` - обращение вне класса (при крайней необходимости).
  Например: `_Person__x` - пример обращения к private-атрибуту.

## Контроль изменения приватных атрибутов

### Список допустимых локальных атрибутов объектов

```python
__slots__ = ["__x", "__y"]
```

- Включает все допустимые имена локальных переменных, включая из конструкторов и сеттеров.
- `__slots__` не допускает наличие имен уже существующих глобальных атрибутов.
- Позволяет уменьшить размер экземпляров класса за счет отсутствия в них словаря `dict` и ускоряет работу с локальными данными таких классов.

### Методы

- `__setattr__(self, key, value)` - при изменении свойства `key` класса.
- `__getattribute__(self, item)` - при получении свойства `item`.
- `__getattr__(self, item)` - при получении несуществующего свойства `item`.
- `__delattr__(self, item)` - при удалении свойства `item`.

### Пример контроля доступа к приватной переменной A

```python
def __getattribute__(self, item):
    if item == "A":
        return "запрещено"
    else:
        return object.__getattribute__(self, item)
        
def __setattr__(self, key, value):
    if key == "A":
        raise AttributeError("Изменение переменной A запрещено")
    else:
        self.__dict__[key] = value
        
def __delattr__(self, item):
    if item == "A":
        print("Удаление переменной A запрещено")
        
def __getattr__(self, item):
    print(f"Свойство {item} не существует")
```


