#lang #lang-c_sharp 

---
### Член типа - `MemberInfo`
   - `DeclaringType` — полное название типа.
   - `MemberType` — тип компонента (например, `Constructor`, `Method`, `Field`, и т.д.).
   - `Name` — название компонента.

##### Метод `GetMembers()`
Позволяет извлечь информацию обо всех доступных компонентах типа в виде объектов `MemberInfo`, включая их тип, имя, и другие детали.
По умолчанию при вызове выводятся все *общедоступные члены* класса, включая *методы доступа к свойствам* и *методы `System.Object`*.

Флаги `BindingFlags` позволяют задавать условия выборки, такие как:
   - `DeclaredOnly` — только методы самого класса без унаследованных.
   - `Instance` — только методы экземпляра.
   - `NonPublic` — непубличные методы.
   - `Public` — публичные методы.
   - `Static` — статические методы.
  
Флаги можно комбинировать для получения нужного набора компонентов.

##### Метод `GetMember()`
Позволяет получать конкретный член класса по его имени, возвращая массив `MemberInfo[]`, чтобы поддерживать случаи, когда несколько членов класса имеют одно имя (например, перегрузка методов).

---

### Примеры кода:

1. **Пример использования `GetMembers()`** — получение всех общедоступных членов класса `Person`:
    ```csharp
    using System.Reflection;

    Type myType = typeof(Person);

    foreach (MemberInfo member in myType.GetMembers())
    {
        Console.WriteLine($"{member.DeclaringType} {member.MemberType} {member.Name}");
    }

    public class Person
    {
        string name;
        public int Age { get; set; }
        public Person(string name, int age)
        {
            this.name = name;
            this.Age = age;
        }
        public void Print() => Console.WriteLine($"Name: {name} Age: {Age}");
    }
    ```
   *Вывод*:
   ```
   Person Method get_Age
   Person Method set_Age
   Person Method Print
   System.Object Method GetType
   System.Object Method ToString
   System.Object Method Equals
   System.Object Method GetHashCode
   Person Constructor .ctor
   Person Property Age
   ```

2. **Пример использования `BindingFlags` для фильтрации компонентов** — получение только компонентов класса `Person`, без унаследованных от `Object`:
    ```csharp
    using System.Reflection;

    Type myType = typeof(Person);

    foreach (MemberInfo member in myType.GetMembers(BindingFlags.DeclaredOnly
                | BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public))
    {
        Console.WriteLine($"{member.DeclaringType} {member.MemberType} {member.Name}");
    }

    public class Person
    {
        string name;
        public int Age { get; set; }
        public Person(string name, int age)
        {
            this.name = name;
            this.Age = age;
        }
        public void Print() => Console.WriteLine($"Name: {name} Age: {Age}");
    }
    ```
   *Вывод*:
   ```
   Person Method get_Age
   Person Method set_Age
   Person Method Print
   Person Constructor .ctor
   Person Property Age
   Person Field name
   Person Field <Age>k__BackingField
   ```

3. **Пример получения одного компонента по имени с использованием `GetMember()`** — поиск метода `Print`:
    ```csharp
    Type myType = typeof(Person);

    // Получаем метод Print
    MemberInfo[] print = myType.GetMember("Print", BindingFlags.Instance | BindingFlags.Public);
    foreach (MemberInfo member in print)
    {
        Console.WriteLine($"{member.MemberType} {member.Name}");
    }
    ```

### Inner links:
[_ Рефлексия. Типы (System.Type)](1.%20Lang/C-sharp/Рефлексия/_%20Рефлексия.%20Типы%20(System.Type).md)

### Outer links:
https://metanit.com/sharp/tutorial/14.2.php