#lang #lang-python 

# Функция `url_for` и пер-ые URL

Импортируем необходимые библиотеки:

```python
from flask import Flask, render_template, url_for 
```

Функция `url_for` так же, как и другие функции Flask, импортируется из него отдельно или вызывается от его имени.

```python
app = Flask(__name__)

@app.route("/about")
def about():
    # url_for может работать только в пределах КЗ,
    # т.е. в рамках обработчика about, вызываемого в КЗ
    print(url_for('about'))  # url_for возвращает адрес страницы для указанного обработчика
    return render_template('about.html')

with app.test_request_context():  # Искусственное создание КЗ без активации веб-сервера
    print(url_for('index'))  # Ошибка, так как 'index' не определен
```

В случае использования нескольких WSGI-приложений (`app`) `url_for` обращается к `current_app` и берет URL из активного приложения.

```python
if __name__ == "__main__":
    app.run(debug=True)
```

---

## Способы описания URL

```python
@app.route("/profile/<username>")  # В <> кавычках указывается переменная, с которой 
def profile(username):              # в последствии можно взаимодействовать в программе
    return f"Пользователь: {username}"
```

```python
@app.route("/profile/<path:username>")  # Конвертер path: переводит весь текст после profile/ в переменную
# Без конвертера указание сложного адреса ("/") приведёт к ошибке адреса
```

### Конверторы для URL

В качестве конверторов можно использовать следующие обозначения:

- `int` – должны присутствовать только цифры.
- `float` – можно записывать число с плавающей точкой.
- `path` – можно использовать любые допустимые символы URL плюс символ слеша `/`.

---

```python
print(url_for('profile', username="selfedu"))  # url_for при обращении к динамическому пути необходимо прописывать переменную
```
