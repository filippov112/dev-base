#lang #lang-python 

---
## Операция JOIN

`JOIN <таблица> ON <условие связывания>`

---
Внешний ключ добавляется при создании таблицы после объявления всех полей, включая сами внешние ключи:

```sql
CONSTRAINT FK_Orders_Folder FOREIGN KEY (parent_id) 
REFERENCES Orders(row_id)  
ON DELETE NO ACTION  
ON UPDATE NO ACTION
```

- **название**: название ограничения
- **поле-ключ**: поле, которое является внешним ключом
- **ссылка на внешнее поле**: поле, на которое ссылается внешний ключ
- **поведение при удалении или обновлении записей**: опции (например, `CASCADE`, `NO ACTION` и др.)
- **необязательные параметры**: дополнительные параметры, если необходимо

## Пример

Предположим, у нас есть две таблицы: `games` и `users`. Таблица `games` содержит поле `user_id`, которое является **внешним ключом** (`FOREIGN KEY`) для связывания с таблицей `users` по полю `rowid`, которое является **первичным ключом**.
Мы хотим получить сводные данные с полями: `name`, `sex`, `score` (из `games`).

```sql
SELECT name, sex, games.score 
FROM games 
JOIN users ON games.user_id = users.rowid
```

- **новая таблица**: `games`
- **связка**: `JOIN`
- **связка ключей**: `user_id` и `rowid`

---
Если не использовать `JOIN`, а писать таблицы через запятую, то таблицы перемножаются построчно:

```sql
SELECT name, sex, games.score 
FROM users, games
```

В данном случае была взята первая запись из таблицы `users`, и ей в соответствие были поставлены все записи из второй таблицы `games`. И так для всех записей.

---
В команде `SELECT` можно указывать несколько операторов `JOIN` для объединения данных из трех, четырех и большего числа таблиц:

```sql
SELECT <поля> 
FROM <таблица 1> 
JOIN <таблица 2> 
JOIN <таблица 3> … 
JOIN <таблица N> ON <условие связывания>
```
