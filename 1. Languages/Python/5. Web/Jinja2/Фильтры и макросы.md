#lang #lang-python 

# Фильтры и макросы

Для итерируемых объектов можно применять фильтры, аналогичные стандартным функциям обработки таких объектов, такие как `min`, `max`, `sum`, `random`.

Пример использования шаблона:
```python
rt = Template("abc {{lis | max}}")
```

## Функция max

```python
max(iterator, attribute=None, start=0)
```
- `iterator` — передаёт ссылку на итерируемый объект (в шаблоне не требуется).
- `attribute` — указывает, по какому параметру итератора производить сортировку.
- `start` — нулевая прибавка.

## Применение фильтров в блоке

Для множественного применения фильтров используется следующий синтаксис:
```jinja
{% filter <название> %}
<объект применения фильтра>
{% endfilter %}
```

## Макроопределения (макросы)

Определение макроса:
```jinja
{% macro <название>(<аргументы как у конструктора>) -%}
<какой-то текст со вставками аргументов типа {{<назв.арг>}}>
{%- endmacro %}
```

Создание и вывод экземпляра макроса:
```jinja
{{<название макроса>(<аргументы>)}}
```

### Вложенные макросы (call)

Вложенные макросы создаются так:
```jinja
{% call(<название>) <название род.макроса>(аргумент воздействия) %}
<содержание объекта с обращением к нему через {{<название>.<свойство>}}>
{% endcall %}
```

Вызов макроса:
```jinja
{{caller(<передаваемый аргумент>)}}
```

### Объяснение

`call` осуществляет вызов макроса. Если мы передаём аргумент для `call`, то код `call` и связанный с ним макрос запустится. 
Передача аргумента напрямую в описание макроса ничего не повлечёт, т.е. **МАКРОС** — это описание функции, которую можно вызывать как напрямую, так и в связке с `call`.
