#Django #Python

# 14. Формы, связанные с моделями

Чтобы связать форму с моделью, перейдем в файл `women/forms.py`, и класс `AddPostForm` унаследует от другого базового класса `ModelForm` (в отличие от класса `Form` для простой формы).

```python
class AddPostForm(forms.ModelForm):
    # Можно вносить изменения при создании формы через переопределение конструктора
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.fields['cat'].empty_label = "Категория не выбрана"  
```

## Поля

Поля автоматически создаются по полям модели таблицы и с ними связываются.

```python
class Meta:  # Класс представления (похожий на класс пред. модели в админ панели)
    model = Women  # Связываем с моделью
    fields = '__all__'  # Указываем отображаемые поля
    # Или так:
    # fields = ['title', 'slug', 'content', 'is_published', 'cat']
```

## Настройка стилей оформления полей

Настраиваем стили оформления полей:

```python
widgets = {
    'title': forms.TextInput(attrs={'class': 'form-input'}),
    'content': forms.Textarea(attrs={'cols': 60, 'rows': 10})
}
```

Вместо прежней конструкции для простой формы:

```python
Women.objects.create(**form.cleaned_data)
```

запишем:

```python
form.save()
```

Проверка на валидность также не потребуется, Django всё сделает сам.
