#Django #Python


# 8. Формирование URL-адресов в шаблонах

**Шаблон для формирования URL**

```django
{% url '<URL-адрес или имя маршрута>' [параметры ссылки] %}
```

**Обращение по URL (плохая практика):**

```html
<li class="logo">
    <a href="/"><div class="logo"></div></a>
</li>
```

**Обращение по именованной ссылке через `urls.py`:**

```html
<li class="logo">
    <a href="{% url 'home' %}">
        <div class="logo"></div>
    </a>
</li>
```

**Формирование динамических URL-адресов**

1. В `urls.py`:
```python
path('post/<int:post_id>/', show_post, name='post')
```

2. В представлении:
```python
def show_post(request, post_id):
    return HttpResponse(f"Отображение статьи с id = {post_id}")
```

3. В шаблоне:
```html
<p class="link-read-post">
    <a href="{% url 'post' p.pk %}">Читать пост</a>
</p>
```

> **Примечание**: Параметры передаются через пробел:
>
> ```django
> {% url 'post' p.pk %}
> ```



**Лучший способ для обработчиков с параметром**

В модели можно перегрузить метод `get_absolute_url`:
```python
def get_absolute_url(self):
    return reverse('post', kwargs={'post_id': self.pk})
```

> **Не забудьте импортировать:**
>
> ```python
> from django.urls import reverse
> ```

Тогда в шаблоне можно обращаться так:
```html
<p class="link-read-post">
    <a href="{{ p.get_absolute_url }}">Читать пост</a>
</p>
```

Тем самым привязываем обработчик записей непосредственно к классу. 
Это удобно при изменении параметров (например, `self.pk`) отображения таблиц сразу на множестве страниц сайта.
