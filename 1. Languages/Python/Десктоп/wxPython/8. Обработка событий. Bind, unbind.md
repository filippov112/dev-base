#lang #lang-python 

# 8. Обработка событий. Bind, unbind

Bind наследуется почти всеми классами wxPython. 

```python
self.Bind(wx.EVT_MENU, self.onQuit, item)		
self.Bind(wx.EVT_MENU, self.onQuit, id=APP_EXIT)  # лучше связывать по id, чтобы не зависеть от имени переменной
```

---

### Синтаксис Bind

```python
Bind(event, handler, source=None)
```

- **event**  – тип события, связанный с определенным интерфейсным объектом (событие-триггер);
- **handler**  – ссылка на функцию-обработчик (обработчик, которому направляется событие через event);
- **source**  – источник, генерирующий событие (условие активации обработчика).

---

Bind может быть определен на любом уровне фрейма: будь то сам фрейм, панель, меню или кнопка.

Обработка события начинается с самого низкого уровня (например, с кнопки). В таком случае обработчики этого же события уровнями выше не будут задействованы, если не сохранить событие в первом обработчике и далее передать его до нужного уровня с помощью `Skip`.

**ПРИМЕЧАНИЕ:** Основные события (basic events) не распространяются на родительские элементы. Например, `EVT_CLOSE`, закрывающее окно, и т.п. небезопасные события.

```python
def onQuit(self, event):
    event.Skip()  # сохранение события после завершения обработчика для перехода к следующему уровню обработки.
```

---

### Отключение событий

```python
panel.Unbind(wx.EVT_BUTTON)  # отключает обработку события на том уровне, с которого вызван
```

---

### Неполный список событий

- **wx.EVT_BUTTON** – событие, генерируемое виджетом `wx.Button`;
- **wx.EVT_MENU** – событие, генерируемое меню;
- **wx.EVT_TEXT** – событие, генерируемое `wx.TextCtrl`;
- **wx.EVT_TOOL** – событие, генерируемое `toolbox`;
- **wx.EVT_MOVE** – событие при перемещении окна;
- **wx.EVT_PAINT** – событие при перерисовке элемента (обычно, окна);
- **wx.EVT_KEY_DOWN** – событие при нажатии на клавишу;
- **wx.EVT_KEY_UP** – событие при отпускании клавиши.

---

### Пример отображения диалогового окна предупреждения при закрытии приложения

```python
self.Bind(wx.EVT_CLOSE, self.OnCloseWindow)

def OnCloseWindow(self, event):
    # Делаем запрос через диалоговое окно.
    dial = wx.MessageDialog(None, 'Вы действительно хотите выйти?', 'Вопрос',  
                 wx.YES_NO | wx.NO_DEFAULT | wx.ICON_QUESTION)

    # Проверяем полученный результат диалогового окна
    ret = dial.ShowModal()

    if ret == wx.ID_YES:
        self.Destroy()  # для закрытия используем Destroy вместо Close, чтобы не зациклить обработчик
    else:
        event.Veto()  # иначе гасим событие.
```
