#lang #lang-python 

---
Далее рассмотрим некоторые возможности по расширению функциональности виджета `ListCtrl` с помощью следующих mixins (смешивателей):

- **wx.ColumnSorterMixin** – для сортировки столбцов;
- **wx.ListCtrlAutoWidthMixin** – для выравнивания по всей ширине;
- **wx.ListCtrlSelectionManagerMix** – для управления выделением;
- **wx.TextEditMixin** – для редактирования отдельных элементов списка;
- **wx.CheckListCtrlMixin** – для создания checkbox элементов в списке;
- **wx.ListRowHighlighter** – для подсвечивания строк определенным образом.

## 1) Подключаем модуль для миксинов

```python
import wx.lib.mixins.listctrl
```

## 2) Используя множественное наследование, расширим базовый класс ListCtrl с помощью миксинов.

```python
class ListCtrlMixins(wx.ListCtrl, wx.lib.mixins.listctrl.ListCtrlAutoWidthMixin):
    def __init__(self, parent, *args, **kw):
        wx.ListCtrl.__init__(self, parent, wx.ID_ANY, style=wx.LC_REPORT)  # Сначала вызываем конструктор основного класса, который хотим расширить.
        wx.lib.mixins.listctrl.ListCtrlAutoWidthMixin.__init__(self)        # Затем конструктор миксина
```

Так добавляем все необходимые миксины в один дочерний класс и вызываем их конструкторы после базового конструктора класса.

---

## Особенности при работе с миксином сортировки записей таблицы `wx.ColumnSorterMixin` 

1) Добавляемые записи должны представлять из себя пары ключ-значение (где все данные записи будут значением):
```python
books = {
    1: ('Евгений Онегин', 'Пушкин А.С.', 2000, 192),
    2: ('Пиковая дама', 'Пушкин А.С.', 2004, 150.53),
    3: ('Мастер и Маргарита', 'Булгаков М.А.', 2005, 500),
    4: ('Роковые яйца', 'Булгаков М.А.', 2003, 400),
    5: ('Белая гвардия', 'Булгаков М.А.', 2010, 340)
}
```

2) Виджет должен хранить ссылку на источник добавляемых записей. Прописываем её как отдельное свойство в конструкторе класса:
```python
self.itemDataMap = books  # Специальное свойство, используемое смешивателем
```

3) Добавляем специальный метод классу, возвращающий ссылку на таблицу:
```python
def GetListCtrl(self):
    return self
```

4) При добавлении записей связываем специальным методом миксина запись с ключом:
```python
for key, b in books.items():
    index = self.list.Append(b)
    self.list.SetItemData(index, key)
```
