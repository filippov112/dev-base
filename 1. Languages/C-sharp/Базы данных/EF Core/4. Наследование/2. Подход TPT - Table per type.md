#EntityFramework #Csharp 
# <font color="#00b0f0">EF Core:</font> Подход TPT - Table per type

**TPT (Table Per Type)** – подход, при котором для каждого класса в иерархии наследования создаётся отдельная таблица.  

Способы реализации:  

##### **Использование атрибутов**  
Атрибут `[Table("ИмяТаблицы")]` задаёт имя таблицы для производного класса.  

```csharp  
public class User
{
    public int Id { get; set; }
    public string? Name { get; set; }
}

[Table("Employees")]  
public class Employee : User  
{  
    public int Salary { get; set; }  
}  
```  

```sql
CREATE TABLE "Users" (
    "Id"    INTEGER NOT NULL,
    "Name"  TEXT,
    CONSTRAINT "PK_Users" PRIMARY KEY("Id" AUTOINCREMENT)
);
CREATE TABLE "Employees" (
    "Id"    INTEGER NOT NULL,
    "Salary"    INTEGER NOT NULL,
    CONSTRAINT "FK_Employees_Users_Id" FOREIGN KEY("Id") REFERENCES "Users"("Id") ON DELETE CASCADE,
    CONSTRAINT "PK_Employees" PRIMARY KEY("Id" AUTOINCREMENT)
);
```

##### **Использование Fluent API**  
Метод `ToTable()` задаёт имя таблицы.  

```csharp  
protected override void OnModelCreating(ModelBuilder modelBuilder)  
{  
    modelBuilder.Entity<Employee>().ToTable("Employees");  
    modelBuilder.Entity<Manager>().ToTable("Managers");  
}  
```  

**Метод `UseTptMappingStrategy` (EF Core 7.0+)**  
Упрощает настройку TPT для всей иерархии.  
Применяется к базовому классу.  

```csharp  
protected override void OnModelCreating(ModelBuilder modelBuilder)  
{  
    modelBuilder.Entity<User>().UseTptMappingStrategy();  
}  
```  

---
### Outer links:
https://metanit.com/sharp/efcore/4.2.php