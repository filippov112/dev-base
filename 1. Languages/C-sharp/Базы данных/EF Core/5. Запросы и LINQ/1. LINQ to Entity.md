#EntityFramework #Csharp 
# <font color="#00b0f0">EF Core:</font> LINQ to Entity

Entity Framework Core транслирует LINQ-запросы в SQL-запросы, понятные реляционным СУБД (например, MS SQL Server, SQLite).  

---
#### **Построение запросов**  
Запросы можно создавать двумя способами:  
1. **Через операторы LINQ** (синтаксис запросов).  
	```csharp
	var users = (from user in db.Users.Include(p => p.Company)
	             where user.CompanyId == 1
	             select user).ToList();
	```
2. **Через методы расширения LINQ** (синтаксис методов).  
	```csharp
	var users = db.Users.Include(p => p.Company).Where(p => p.CompanyId == 1).ToList();
	```

---
#### **Методы**  
| Метод | Описание |
|--------|------------|
| `All` / `AllAsync` | Проверяет, все ли элементы удовлетворяют условию. |
| `Any` / `AnyAsync` | Проверяет, есть ли хотя бы один элемент, удовлетворяющий условию. |
| `Average` / `AverageAsync` | Вычисляет среднее значение. |
| `Contains` / `ContainsAsync` | Проверяет наличие элемента в коллекции. |
| `Count` / `CountAsync` | Подсчитывает количество элементов. |
| `First` / `FirstOrDefault` | Возвращает первый элемент (или значение по умолчанию). |
| `Single` / `SingleOrDefault` | Возвращает единственный элемент (или значение по умолчанию, иначе исключение). |
| `Select` | Определяет проекцию данных. |
| `Where` | Фильтрует данные по условию. |
| `OrderBy` / `OrderByDescending` | Сортировка по возрастанию / убыванию. |
| `ThenBy` / `ThenByDescending` | Дополнительная сортировка. |
| `Join` | Соединяет две коллекции по ключу. |
| `GroupBy` | Группирует элементы. |
| `Except` / `Union` / `Intersect` | Разность / объединение / пересечение коллекций. |
| `Sum` / `Min` / `Max` | Сумма / минимум / максимум. |
| `Take` / `Skip` | Выбор / пропуск элементов. |
| `TakeWhile` / `SkipWhile` | Выбор / пропуск элементов по условию. |
| `ToList` / `ToListAsync` | Преобразует в список. |

---

#### **Асинхронные методы**  
Для асинхронного выполнения запросов используются методы с суффиксом `Async`:  
```csharp
var users = await db.Users
    .Include(p => p.Company)
    .Where(p => p.CompanyId == 1)
    .ToListAsync();
```

---
### Outer links:
https://metanit.com/sharp/efcore/5.1.php