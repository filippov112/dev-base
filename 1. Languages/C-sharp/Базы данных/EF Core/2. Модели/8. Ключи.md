#EntityFramework #Csharp 
# <font color="#00b0f0">EF Core:</font> Ключи
---
#### **Первичные ключи (Primary Keys)**  
**Стандартные соглашения:**  
- Свойство `Id` или `[ИмяКласса]Id` автоматически становится первичным ключом.  
  ```csharp
  public class User
  {
      public int Id { get; set; }          // Автоматически PK
      // или
      public int UserId { get; set; }      // Также PK
  }
  ```  

**Настройка через аннотации:**  
- Атрибут `[Key]` помечает свойство как первичный ключ.  
  ```csharp
  public class User
  {
      [Key]
      public int Ident { get; set; }       // Явное указание PK
  }
  ```  

**Настройка через Fluent API:**  
- Метод `HasKey()` в `OnModelCreating`.  
  ```csharp
  protected override void OnModelCreating(ModelBuilder modelBuilder)
  {
      modelBuilder.Entity<User>().HasKey(u => u.Ident);
  }
  ```  
  ```csharp
	// Указание имени ограничения 
  modelBuilder.Entity<User>().HasKey(u => u.Ident).HasName("UsersPrimaryKey");
  ```  

---

#### **Составные ключи (Composite Keys)**  
- Создаются только через **Fluent API** с помощью `HasKey()` и анонимного типа.  
  ```csharp
  modelBuilder.Entity<User>().HasKey(u => new { u.PassportSeria, u.PassportNumber });
  ```  

---
#### **Альтернативные ключи (Alternate Keys)**  
- Не являются первичными, но гарантируют уникальность (аналог `UNIQUE` в SQL).  
- Настраиваются через `HasAlternateKey()`.  
	```csharp
	modelBuilder.Entity<User>().HasAlternateKey(u => u.Passport);
	```  

- **Составные альтернативные ключи:**  
	```csharp
	modelBuilder.Entity<User>().HasAlternateKey(u => new { u.Passport, u.PhoneNumber });
	```  

---
### Outer links:
https://metanit.com/sharp/efcore/2.7.php