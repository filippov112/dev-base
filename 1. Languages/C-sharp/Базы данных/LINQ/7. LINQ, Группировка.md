#lang #lang-c_sharp 

---
Для группировки данных по определенным параметрам применяется оператор `group by` и метод `GroupBy()`.

`group <TSource> by <TKey>`
`GroupBy(Func<TSource, TKey> f)`

- Возвращает итерируемую коллекцию групп. 
- Каждая группа является также итерируемой коллекцией записей.
- `Key` - свойство ключа группы, задается `<TKey>` или результатом параметра-функции группировки метода 
- `<TSource>` - определяет что будет представлять записи в группе
- `select` - при наличии `group by` не требуется, если не нужно преобразовывать группы в пользовательские типы.

#### Пример

**Начальные условия:**
```csharp
//Person[] people =
//{
//    new Person("Tom", "Microsoft"), new Person("Sam", "Google"),
//    new Person("Bob", "JetBrains"), new Person("Mike", "Microsoft"),
//    new Person("Kate", "JetBrains"), new Person("Alice", "Microsoft"),
//};

//record class Person(string Name, string Company);
```

**Через операторы:**
```csharp
var companies = from person in people
     group person by person.Company;
```

**Через методы:**
```csharp
var companies = people.GroupBy(p => p.Company);
```

**Перебор:**
```csharp
foreach(var company in companies)
{
    Console.WriteLine(company.Key);
 
    foreach(var person in company)
    {
//        Console.WriteLine(person.Name);
    }
//    Console.WriteLine(); // для разделения между группами
}
```

#### Вложенные запросы и преобразования групп в другие типы

```csharp
var companies = from person in people
	group person by person.Company into g
	select new
	{
		Name = g.Key,
		Count = g.Count(),
		Employees = from p in g select p
	};
```

```csharp
var companies = people.GroupBy(p=>p.Company)
	.Select(g => new
	{
		Name = g.Key,
		Count = g.Count(),
		Employees = g.Select(p=> p) 
	});
```

### Inner links:
[_ LINQ](1.%20Languages/C-sharp/Базы%20данных/LINQ/_%20LINQ.md)
### Outer links:
https://metanit.com/sharp/tutorial/15.6.php