#Csharp 

# LINQ, Агрегатные операции в C#

#### Метод `Aggregate`
- параметр - функция агрегации для 2-ух операндов.
- Берет первый элемент и последовательно добавляет к нему последующие элементы согласно переданной функции.
- Можно использовать перегрузку, добавив 1 элемент в начало коллекции перед применением метода.

```csharp
//int[] numbers = { 1, 2, 3, 4, 5};
 
int query = numbers.Aggregate((x,y)=> x - y);
//Console.WriteLine(query);   // -13
```

```csharp
//string[] words = { "Gaudeamus", "igitur", "Juvenes", "dum", "sumus" };
var sentence = words.Aggregate("Text:", (first, next) => $"{first} {next}");
 
//Console.WriteLine(sentence);  // Text: Gaudeamus igitur Juvenes dum sumus
```

#### Получение размера выборки, метод `Count`
- Может принимать лямбда-выражение, которое устанавливает условие выборки. Поэтому мы можем в данном случае не использовать выражение `Where`:

```csharp
//int[] numbers = { 1, 2, 3, 4, 10, 34, 55, 66, 77, 88 };
//  количество четных чисел, которые больше 10
int size = numbers.Count(i => i % 2 == 0 && i > 10);
//Console.WriteLine(size);    // 3
```

#### Получение суммы, метод `Sum`
- Можем указать свойство, значения которого будут суммироваться

```csharp
//Person[] people = { new Person("Tom", 37), new Person("Sam", 28), new Person("Bob", 41) };
 
int ageSum = people.Sum(p => p.Age);
//Console.WriteLine(ageSum);     // 106
 
//record class Person(string Name, int Age);
```

#### Максимальное (`Max`), минимальное (`Min`) и среднее (`Average`) значения
- Можно передать делегат, который принимает свойство, применяемое в вычислениях.

```csharp
//Person[] people = { new Person("Tom", 37), new Person("Sam", 28), new Person("Bob", 41) };
 
int minAge = people.Min(p => p.Age); // минимальный возраст
int maxAge = people.Max(p => p.Age); // максимальный возраст
double averageAge = people.Average(p => p.Age); //средний возраст
 
//Console.WriteLine($"Min Age: {minAge}");           // Min Age: 28
//Console.WriteLine($"Max Age: {maxAge}");           // Max Age: 41
//Console.WriteLine($"Average Age: {averageAge}");   // Average Age: 35,33
 
//record class Person(string Name, int Age);
```

### Inner links:
[_ LINQ](1.%20Languages/C-sharp/Базы%20данных/LINQ/_%20LINQ.md)

### Outer links:
https://metanit.com/sharp/tutorial/15.5.php