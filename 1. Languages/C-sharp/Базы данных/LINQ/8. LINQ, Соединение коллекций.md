#lang #lang-c_sharp 

---
Используется для объединения двух разнотипных наборов в один. 
Для соединения используется оператор `join` или метод `Join()`.

### Join
- По сути `inner join`.

```csharp
from объект1 in набор1
join объект2 in набор2 on объект2.свойство2 equals объект1.свойство1
// select ...
```

```csharp
Join(
	IEnumerable<TInner> inner, // присоединяемая коллекция
    Func<TOuter,TKey> outerKeySelector, // ф-ция получения первого ключа
    Func<TInner,TKey> innerKeySelector, // ф-ция получения второго ключа
    Func<TOuter,TInner,TResult> resultSelector // ф-ция выборки нужных данных из 2-ух записей (заменяет select)
);
```

### GroupJoin
- Выполняет сразу и соединение и группировку.
- В каких-то ситуациях может заменять `left join`, т.к. группы присутствуют по всем записям левого набора, независимо от наличия соответствий в правом.

```csharp
GroupJoin(
	IEnumerable<TInner> inner, 
	Func<TOuter,TKey> outerKeySelector, 
	Func<TInner,TKey> innerKeySelector, 
	Func<TOuter, IEnumerable<TInner>, TResult> resultSelector // ф-ция получения результата из внутренней записи и набора внешних, которые ей соответствуют
);
```

```csharp
from объект1 in набор1
join объект2 in набор2 on объект2.свойство2 equals объект1.свойство1 into g // добавляется набор объектов2 - g
// select ...
```

### Zip
- Параллельное соединение записей в кортежи со свойствами `First` и `Second` - соответствующими записям 2-ух наборов.

```csharp
//var courses = new List<Course> { new Course("C#"), new Course("Java") };
//var students = new List<Student> { new Student("Tom"), new Student("Bob") };
 
var enrollments = courses.Zip(students);
 
foreach (var enrollment in enrollments)
    Console.WriteLine($"{enrollment.First} - {enrollment.Second}");
 
//record class Course(string Title);  // учебный курс
//record class Student(string Name);  // студент
```

---
### Примеры

```csharp
//Person[] people =
//{
//    new Person("Tom", "Microsoft"), new Person("Sam", "Google"),
//    new Person("Bob", "JetBrains"), new Person("Mike", "Microsoft"),
//};
//Company[] companies =
//{
//    new Company("Microsoft", "C#"),
//    new Company("Google", "Go"),
//    new Company("Oracle", "Java")
//};
var employees = people.Join(
	 companies, // второй набор
	 p => p.Company, // свойство-селектор объекта из первого набора
	 c => c.Title, // свойство-селектор объекта из второго набора
	 (p, c) => new { Name = p.Name, Company = c.Title, Language = c.Language } // результат
);
 
//foreach (var emp in employees)
//    Console.WriteLine($"{emp.Name} - {emp.Company} ({emp.Language})");
 
//record class Person(string Name, string Company);
//record class Company(string Title, string Language);
```

```csharp
//Person[] people =
//{
//    new Person("Tom", "Microsoft"), new Person("Sam", "Google"),
//    new Person("Bob", "JetBrains"), new Person("Mike", "Microsoft"),
//};
//Company[] companies =
//{
//    new Company("Microsoft", "C#"),
//    new Company("Google", "Go"),
//    new Company("Oracle", "Java")
//};
var employees = from p in people
	 join c in companies on p.Company equals c.Title
	 select new { Name = p.Name, Company = c.Title, Language = c.Language };
 
//foreach (var emp in employees)
//    Console.WriteLine($"{emp.Name} - {emp.Company} ({emp.Language})");
 
//record class Person(string Name, string Company);
//record class Company(string Title, string Language);
```

```csharp
var personnel = companies.GroupJoin(people, // второй набор
	 c => c.Title, // свойство-селектор объекта из первого набора
	 p => p.Company, // свойство-селектор объекта из второго набора
	 (c, employees) => // результат
		 new   
		 {
			 Title = c.Title,
			 Employees = employees
		 }
);
```

```csharp
var personnel = from c in companies
                join p in people on c.Title equals p.Company into g
                select new   // результат
                {
                    Title = c.Title,
                    Employees = g
                };
```


### Inner links:
[_ LINQ](1.%20Languages/C-sharp/Базы%20данных/LINQ/_%20LINQ.md)

### Outer links:
https://metanit.com/sharp/tutorial/15.7.php