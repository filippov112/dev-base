#lang #lang-c_sharp
# <font color="#00b0f0">C#:</font> Самовалидация модели

Можно реализовать валидацию модели без использования атрибутов, применив **интерфейс `IValidatableObject`**.

---

#### **Интерфейс `IValidatableObject`**

```csharp
public interface IValidatableObject
{
    IEnumerable<ValidationResult> Validate(ValidationContext validationContext);
}
```
  - `Validate` - позволяет классу самому проверять свои данные.
	  - `ValidationContext`: предоставляет контекст для валидации (например, метаданные объекта).
	  - Коллекция объектов `ValidationResult`, где каждый объект представляет ошибку валидации.

---
**Пример**

```csharp
public class User : IValidatableObject
{
    // ...

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        List<ValidationResult> errors = new List<ValidationResult>();

        // Проверка имени
        if (string.IsNullOrWhiteSpace(Name)) // Не должно быть пустым или состоять только из пробелов.
            errors.Add(new ValidationResult("Не указано имя"));
        if (Name.Length < 2 || Name.Length > 20) // Длина должна быть от 2 до 20 символов.
            errors.Add(new ValidationResult("Некорректная длина имени"));

        // Проверка возраста
        if (this.Age < 1 || this.Age > 100) // Должен находиться в диапазоне от 1 до 100.
            errors.Add(new ValidationResult("Недопустимый возраст"));

        return errors;
    }
}
```

---
### Outer links:
- https://metanit.com/sharp/dotnet/2.4.php