#Csharp #ASP

# 3.1. ISession в ASP.NET Core

### Свойства и методы `ISession`

- `Keys`: список строк, все доступные ключи
- `Clear()`: очищает сессию
- `Get(string key)`: получает по ключу key значение, которое представляет массив байтов
- `GetInt32(string key)`: получает по ключу key значение, которое представляет целочисленное значение
- `GetString(string key)`: получает по ключу key значение, которое представляет строку
- `Set(string key, byte[] value)`: устанавливает по ключу key значение, которое представляет массив байтов
- `SetInt32(string key, int value)`: устанавливает по ключу key значение, которое представляет целочисленное значение value
- `SetString(string key, string value)`: устанавливает по ключу key значение, которое представляет строку value
- `Remove(string key)`: удаляет значение по ключу
- Если же надо сохранить какой-то сложный объект, то его надо сериализовать в строку, а при получении из сессии - обратно десериализовать. Можно например сделать через методы расширения `ISession`:
	
	```csharp
	using System.Text.Json;
	 
	public static class SessionExtensions
	{
	    public static void Set<T>(this ISession session, string key, T value)
	    {
	        session.SetString(key, JsonSerializer.Serialize<T>(value));
	    }
	 
	    public static T? Get<T>(this ISession session, string key)
	    {
	        var value = session.GetString(key);
	        return value == null ? default(T) : JsonSerializer.Deserialize<T>(value);
	    }
	}
	...
	Person? person = context.Session.Get<Person>("person");
	context.Session.Set<Person>("person", person);
	```

### Inner links:
[3. Сессии](1.%20Languages/C-sharp/WEB/ASP.NET/ASP.NET%20Core/7.%20Состояние,%20куки%20и%20сессии/3.%20Сессии.md)