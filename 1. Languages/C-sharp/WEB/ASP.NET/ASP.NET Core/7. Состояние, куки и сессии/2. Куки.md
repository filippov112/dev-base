#Csharp #ASP

# 2. Куки в ASP.NET Core

Куки хранятся на компьютере пользователя и могут устанавливаться как на сервере, так и на клиенте. 
Так как куки посылаются с каждым запросом на сервер, то их максимальный размер ограничен 4096 байтами.

#### Получение
Получение из запроса - коллекция `Request.Cookies` объекта `HttpContext`.
Интерфейс - `IRequestCookieCollection`.
Элементы коллекции - `KeyValuePair<string, string>`.
куки - это строковые значения.

**Методы:**
- `bool ContainsKey(string key)`: возвращает true, если в коллекции есть куки с ключом key
- `bool TryGetValue(string key, out string value)`: возвращает true, если удалось получить значение куки с ключом key в переменную value

#### Отправка
Отправка в ответе - коллекция `context.Response.Cookies`.
Интерфейс - `IResponseCookies`.

**Методы:**
- `Append(string key, string value)`: добавляет для куки с ключом key значение value
- `Delete(string key)`: удаляет куку по ключу

### Пример

```csharp
var builder = WebApplication.CreateBuilder();
var app = builder.Build();
 
app.Run(async (context) =>
{
    if (context.Request.Cookies.ContainsKey("name"))
    {
        string? name = context.Request.Cookies["name"];
        await context.Response.WriteAsync($"Hello {name}!");
    }
    else
    {
        context.Response.Cookies.Append("name", "Tom");
        await context.Response.WriteAsync("Hello World!");
    }
});
 
app.Run();
```

### Outer links:
https://metanit.com/sharp/aspnet6/8.2.php