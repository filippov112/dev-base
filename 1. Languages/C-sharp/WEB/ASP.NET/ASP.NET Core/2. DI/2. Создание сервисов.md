#Csharp #ASP

# 2. Создание сервисов в ASP.NET Core

**Добавление:**
```csharp
builder.Services.AddTransient<ITimeService, ShortTimeService>();
```

**Получение (паттерн - [Локатор сервисов (Service locator)](2.%20Knowledge/Программирование/9.%20Паттерны/Проектирование/Порождающие/Локатор%20сервисов%20(Service%20locator).md), остальное см. [3. Получение сервисов](1.%20Languages/C-sharp/WEB/ASP.NET/ASP.NET%20Core/2.%20DI/3.%20Получение%20сервисов.md)):**
```csharp
var timeService = app.Services.GetService<ITimeService>(); 
```

Наличие интерфейса для сервиса не обязательно:
```csharp
builder.Services.AddTransient<TimeService>();
...
var timeService = app.Services.GetService<TimeService>();
```

---

#### Весь пример

```csharp
var builder = WebApplication.CreateBuilder();
 
builder.Services.AddTransient<ITimeService, ShortTimeService>();
 
var app = builder.Build();
 
app.Run(async context =>
{
    var timeService = app.Services.GetService<ITimeService>(); 
    await context.Response.WriteAsync($"Time: {timeService?.GetTime()}");
});
 
app.Run();
 
interface ITimeService
{
    string GetTime();
}
// время в формате hh::mm
class ShortTimeService : ITimeService
{
    public string GetTime() => DateTime.Now.ToShortTimeString();
}
// время в формате hh::mm::ss
class LongTimeService : ITimeService
{
    public string GetTime() => DateTime.Now.ToLongTimeString();
}
```

### Outer links:
https://metanit.com/sharp/aspnet6/4.2.php