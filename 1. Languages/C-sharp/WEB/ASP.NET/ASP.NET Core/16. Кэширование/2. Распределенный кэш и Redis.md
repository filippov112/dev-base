#Csharp #ASP 
# <font color="#00b0f0">ASP.NET:</font> –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ Redis

**–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ –∫—ç—à, –¥–æ—Å—Ç—É–ø–Ω—ã–π –≤—Å–µ–º —Å–µ—Ä–≤–µ—Ä–∞–º –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `MemoryCache`, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

üìå **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**  
üîπ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö (–Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ).  
üîπ –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞.  
üîπ –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—â–∏–π –¥–æ—Å—Ç—É–ø –∫ –∫—ç—à—É –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.

üìå **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**  
‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å ‚Äî –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º —É–∑–ª–∞–º.  
‚úÖ –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ.  
‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Äî –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤.

---

### üìå **IDistributedCache**

`IDistributedCache` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –∫—ç—à–µ–º –≤ ASP.NET Core.

üìå **–ú–µ—Ç–æ–¥—ã:**
- `Set(string key, byte[] value, DistributedCacheEntryOptions options)` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–π—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
	- `SetAsync(string key, byte[] value, DistributedCacheEntryOptions options, CancellationToken token)`
- `SetString(string key, string value)` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
	- `SetStringAsync(string key, string value, CancellationToken token)`
- `GetString(string key)`  ‚Äî –≤–æ–∑–≤—Ä–∞—Ç–∏—Ç—å —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
	- `GetStringAsync(string key, CancellationToken token)`
- `Remove(key)` ‚Äî —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.
- `Refresh(key)` ‚Äî –ø—Ä–æ–¥–ª–∏—Ç—å –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è.

üìå **–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å `IDistributedCache`**
```csharp
public class CacheService
{
    private readonly IDistributedCache _cache;

    public CacheService(IDistributedCache cache)
    {
        _cache = cache;
    }

    public async Task SetDataAsync(string key, string data)
    {
        var options = new DistributedCacheEntryOptions
        {
            AbsoluteExpirationRelativeToNow = TimeSpan.FromMinutes(10)
        };

        await _cache.SetStringAsync(key, data, options);
    }

    public async Task<string> GetDataAsync(string key)
    {
        return await _cache.GetStringAsync(key);
    }
}
```

---
## [Redis](3.%20Databases/Redis/_Redis.md)

### üìå **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Redis –∫ ASP.NET Core**

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞:
```sh
dotnet add package Microsoft.Extensions.Caching.StackExchangeRedis
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ `Program.cs`
```csharp
builder.Services.AddStackExchangeRedisCache(options =>
{
    options.Configuration = "localhost:6379"; // –ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ Redis
    options.InstanceName = "SampleInstance";
});
```

üìå **RedisCacheOptions** ‚Äî —Å–≤–æ–π—Å—Ç–≤–∞:
- `Configuration` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
- `InstanceName` ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å –∫–ª—é—á–µ–π –≤ Redis.

üìå **DistributedCacheEntryOptions** ‚Äî —Å–≤–æ–π—Å—Ç–≤–∞:
- `AbsoluteExpirationRelativeToNow` ‚Äî –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–∞–ø–∏—Å–∏.
- `SlidingExpiration` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏.

---
### Outer links:
https://metanit.com/sharp/aspnet6/17.2.php