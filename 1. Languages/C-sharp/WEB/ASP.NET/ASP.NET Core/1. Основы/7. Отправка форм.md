#Csharp #ASP

# 7. Отправка форм в ASP.NET Core

В классе `HttpRequest` определено свойство `Form`.
- Формы используются самые обыкновенные html.
- Фильтрация в контроллере происходит по `action` - адресу отправки формы. - `context.Request.Path`
- Все поля помещаются в словарь уже преобразованные в нужные форматы данных.
- Ключи словаря - имена полей (`name`)
- Одноименные поля и поля с множеством значений помещаются в массивы.

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
</head>
<body>
    <h2>User form</h2>
    <form method="post" action="postuser">
        <p>Name: <br />
            <input name="name" />
        </p>
        <p>Age: <br />
            <input name="age" type="number" />
        </p>
        <p>
            Languages:<br />
            <input name="languages" /><br />
            <input name="languages" /><br />
            <input name="languages" /><br />
        </p>
        <input type="submit" value="Send" />
    </form>
</body>
</html>
```

```csharp
var builder = WebApplication.CreateBuilder();
var app = builder.Build();
 
app.Run(async (context) =>
{
    context.Response.ContentType = "text/html; charset=utf-8";
 
    // если обращение идет по адресу "/postuser", получаем данные формы
    if (context.Request.Path == "/postuser")
    {
        var form = context.Request.Form;
        string name = form["name"];
        string age = form["age"];
        string[] languages = form["languages"];
        // создаем из массива languages одну строку
        string langList = "";
        foreach (var lang in languages)
        {
            langList += $" {lang}";
        }
        await context.Response.WriteAsync($"<div><p>Name: {name}</p>" +
            $"<p>Age: {age}</p>" +
            $"<div>Languages:{langList}</div></div>");
    }
    else
    {
        await context.Response.SendFileAsync("html/index.html");
    }
});
 
app.Run();
```


### Outer links:
https://metanit.com/sharp/aspnet6/2.8.php