#Csharp #ASP

# 13. Метод Map в ASP.NET Core

Метод `Map()` применяется для создания ветки конвейера, которая будет обрабатывать запрос по определенному пути.
```csharp
public static IApplicationBuilder Map (this IApplicationBuilder app, string pathMatch, Action<IApplicationBuilder> configuration);
```

- Первый параметр - подстрока, с которой начинается путь (для вложенных Map-ов эта часть пути учитываться не будет при проверке, т.е. например для `/home/user` - 1-ый уровень будет `/home`, а 2-ой уровень `/user`)
- Второй параметр - делегат ответвления конвейера.

**Пример:**
```csharp
var builder = WebApplication.CreateBuilder();
var app = builder.Build();
 
app.Map("/home", appBuilder =>
{
    appBuilder.Map("/index", Index); // middleware для "/home/index"
    appBuilder.Map("/about", About); // middleware для "/home/about"
    appBuilder.Run(async (context) => await context.Response.WriteAsync("Home Page")); // middleware для "/home"
});
app.Run(async(context) => await context.Response.WriteAsync("Page Not Found"));
app.Run();


void Index(IApplicationBuilder appBuilder)
{
    appBuilder.Run(async context => await context.Response.WriteAsync("Index Page"));
}

void About(IApplicationBuilder appBuilder)
{
    appBuilder.Run(async context => await context.Response.WriteAsync("About Page"));
}
```

### Outer links:
https://metanit.com/sharp/aspnet6/2.14.php