#Csharp #ASP

# 1. Ведение лога и ILogger в ASP.NET Core

ASP предоставляет встроенный сервис логгирования - **объект `ILogger<T>`**.
Доступен через DI или через `WebApplication.Logger`.

- Для фильтрации сообщений по текстовым меткам логгер типизируется некоторым классом - получает **категорию**.
	```csharp
	ILogger<Program> // Обычно это класс, в котором он находится
	```

	```csharp
	app.Map("/hello", (ILogger<Program> logger) =>
	{
	    logger.LogInformation($"Path: /hello  Time: {DateTime.Now.ToLongTimeString()}");
	    return "Hello World";
	});
	```

- Логам можно задавать **уровни**:
	- `Trace`: используется для вывода наиболее детализированных сообщений. Подобные сообщения могут нести важную информацию о приложении и его строении, поэтому данный уровень лучше использовать при разработке, но никак не при публикации
	- `Debug`: для вывода информации, которая может быть полезной в процессе разработки и отладки приложения
	- `Information`: уровень сообщений, позволяющий просто отследить поток выполнения приложения   
	- `Warning`: используется для вывода сообщений о неожиданных событиях, например, ошибках, которые не останавливают выполнение приложения, но в то же время должны быть иследованы    
	- `Error`: для вывода информации об ошибках и исключениях, которые возникли при текущей операции и которые не могут быть обработаны
	- `Critical`: уровень критических ошибок, которые требуют немедленной реакции - ошибками операционной системы, потерей данных в бд, переполнение памяти диска и т.д.
	- `None`: вывод информации в лог не применяется
<br>
- Уровням соответствуют **методы вывода сообщений на консоль**:
	- `LogDebug()`
	- `LogTrace()`
	- `LogInformation()`
	- `LogWarning()`
	- `LogError()`
	- `LogCritical()`
Еще есть `Log()`, которому можно задавать уровень сообщения:
```csharp
logger.Log(LogLevel.Information, $"Requested Path: {context.Request.Path}");
```

<br>

- Перегрузки методов могут принимать **параметры**:
	- `string data`: строковое сообщение для лога
	- `int eventId`: числовой идентификатор, который связан с логом. Идентификатор должен быть статическим и специфическим для определенной части логгируемых событий.
	- `string format`: строковое сообщения для лога, которое может содержать параметры
	- `object[] args`: набор параметров для строкового сообщения
	- `Exception error`: логгируемый объект исключения

### Outer links:
https://metanit.com/sharp/aspnet6/7.1.php