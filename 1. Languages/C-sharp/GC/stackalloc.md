#lang #lang-c_sharp 
# <font color="#00b0f0">C#:</font> stackalloc

- **Ключевое слово `stackalloc`** - выделяет память под **массив в стеке**.
- Ячейки массива расположены в одной области - поэтому адреса можно перебирать.
- Обращение по индексу к указателю - равносильно разыменовыванию с предвар. перемещением указателя.
- Разыменовывание можно сочетать с операциями *пре-/пост- инкремента/декремента* адреса. При *пре-* изменение адреса идет **до** разыменовывания, при *пост-* - **после**.

---

### Примеры

```csharp
unsafe
{
    int* square = stackalloc int[7]; // выделяем память в стеке под семь объектов int - постоянный указатель для хранения точки начала
    int* p = square; // указатель для перебора

    for (int i = 1; i <= 7; i++, p++) // инкрементим адрес (ячейки все идут подряд)
    {
        *p = i * i; // задаем значение
    }
    for (int i = 0; i < 7; i++)
    {
        Console.WriteLine(square[i]); // получаем значение обращаясь как к обычному массиву - то же самое что *(square + i)
    }
}
```

```csharp
unsafe
{
    int* factorial = stackalloc int[7]; 
    int* p = factorial;
 
    *(p++) = 1; // присваиваем первой ячейке значение 1 и затем увеличиваем указатель
    
    for (int i = 2; i <= 7; i++, p++)
    {
        *p = p[-1] * i;
    }
}
```

### Inner links:
[Указатели](1.%20Languages/C-sharp/GC/Указатели.md)
