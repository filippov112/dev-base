#Csharp 
# <font color="#00b0f0">C#:</font> Semaphore

**<font color="#ffff00">Семафор</font>** — это примитив синхронизации, ограничивающий количество потоков, которые могут одновременно получить доступ к ресурсу. Он используется, когда нужно контролировать доступ к ограниченному числу ресурсов, например, при работе с пулом подключений к базе данных.

<font color="#ffff00">Особенности:</font>
- Позволяет нескольким потокам одновременно владеть ресурсом (в отличие от `Mutex` или `lock`, где доступ эксклюзивный).
- Может быть как межпроцессным (`Semaphore` — для всех процессов в ОС), так и локальным (`SemaphoreSlim` — только для потоков в одном процессе).
- `SemaphoreSlim` быстрее за счет использования спин-блокировки и ожидания без обращения к ядру ОС.

<font color="#ffff00">Использование:</font> ограничение одновременного выполнения, управление пулом ресурсов, предотвращение перегрузки системных сервисов.

---

### Практика:

```csharp
Semaphore(int initialCount, int maximumCount [, string? name] [, out bool createdNew])
```
- `initialCount` - начальное количество потоков
- `maximumCount` - максимальное количество потоков
- `name` - имя
- `createdNew` - результат создания.

**Методы:**
- `WaitOne()` - ожидает получения свободного места в семафоре
- `Release()` - освобождает место в семафоре

```csharp
SemaphoreSlim semaphoreSlim = new SemaphoreSlim(2, 3);

// Запрос доступа
await semaphoreSlim.WaitAsync();

// Работа с ресурсом...

// Освобождение семафора
semaphoreSlim.Release();

```

### Outer links:
https://metanit.com/sharp/tutorial/11.8.php