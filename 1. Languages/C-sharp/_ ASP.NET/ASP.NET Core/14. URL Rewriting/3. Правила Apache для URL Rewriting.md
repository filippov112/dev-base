#lang #lang-c_sharp #aspnet 

---
### üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª Apache –≤ ASP.NET Core

ASP.NET Core –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç `.htaccess`, –Ω–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ Apache —á–µ—Ä–µ–∑ `AddApacheModRewrite()`:

```csharp
using Microsoft.AspNetCore.Rewrite;

var options = new RewriteOptions();

using var apacheRules = File.OpenText("ApacheModRewrite.txt");
options.AddApacheModRewrite(apacheRules);

app.UseRewriter(options);
```

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ Apache-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (`RewriteEngine`, `RewriteCond`, `RewriteRule`).
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ mod_rewrite, –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `.htaccess` –∫–∞–∫ —Ç–∞–∫–æ–≤–æ–≥–æ.
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Microsoft.AspNetCore.Rewrite` (–ø–∞–∫–µ—Ç –≤–∫–ª—é—á—ë–Ω –≤ SDK).

---
### üìÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ –ø—Ä–∞–≤–∏–ª Apache (–æ–±—ã—á–Ω–æ `.htaccess`)

–§–∞–π–ª –ø—Ä–∞–≤–∏–ª –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –º–æ–¥—É–ª–µ Apache `mod_rewrite`. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```apache
RewriteEngine On

# –ü—Ä–æ—Å—Ç–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
RewriteRule ^old-path$ /new-path [R=301,L]

# –£—Å–ª–æ–≤–∏–µ –∏ –ø—Ä–∞–≤–∏–ª–æ
RewriteCond %{HTTP_HOST} ^example\.com$
RewriteRule ^(.*)$ https://www.example.com/$1 [R=301,L]
```

–ö–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
- `RewriteEngine On` ‚Äî –≤–∫–ª—é—á–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è.
- `RewriteRule pattern substitution [flags]`:
    - `pattern` ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ.   
    - `substitution` ‚Äî –Ω–æ–≤—ã–π –ø—É—Ç—å.     
    - `flags` ‚Äî –ø–æ–≤–µ–¥–µ–Ω–∏–µ (R, L, QSA, etc).    
- `RewriteCond test-string condition` ‚Äî —É—Å–ª–æ–≤–∏–µ, –ø—Ä–∏–º–µ–Ω—è–µ–º–æ–µ –ø–µ—Ä–µ–¥ –ø—Ä–∞–≤–∏–ª–æ–º.

–ü—Ä–∏–º–µ—Ä—ã —Ñ–ª–∞–≥–æ–≤:
- `R=301` ‚Äî —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å –∫–æ–¥–æ–º 301.
- `L` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É, –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ.
- `QSA` ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É –∑–∞–ø—Ä–æ—Å–∞ (`Query String`).

---
### Outer links:
https://metanit.com/sharp/aspnet6/15.3.php