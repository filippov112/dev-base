#lang #lang-c_sharp 

---
Для файлов есть встроенных middleware, здесь же представлены примеры нативной работы с файлами.
- При работе с *относительными* путями - в свойствах файлов ставим *Copy to Output Directory* значение `Copy if newer` или `Copy always`, чтобы файл автоматически копировался в выходной каталог при построении приложения.

**Открытие файла в браузере:**
```csharp
app.Run(async (context) => await context.Response.SendFileAsync("D:\\forest.jpg"));
```

```csharp
app.Run(async(context) => await context.Response.SendFileAsync("forest.jpg"));
```

```csharp
app.Run(async(context) => 
{
    context.Response.ContentType = "text/html; charset=utf-8";
    await context.Response.SendFileAsync("html/index.html");
});
```

**Загрузка файлов:**
```csharp
app.Run(async (context) =>
{
    context.Response.Headers.ContentDisposition = "attachment; filename=my_forest.jpg";
    await context.Response.SendFileAsync("forest.jpg");
});
```

**Объект `IFileInfo`:**
```csharp
using Microsoft.Extensions.FileProviders;

app.Run(async (context) =>
{
    var fileProvider = new PhysicalFileProvider(Directory.GetCurrentDirectory());
    var fileinfo = fileProvider.GetFileInfo("forest.jpg");
 
    context.Response.Headers.ContentDisposition = "attachment; filename=my_forest2.jpg";
    await context.Response.SendFileAsync(fileinfo);
});
```

### Outer links:
https://metanit.com/sharp/aspnet6/2.6.php