#lang #lang-c_sharp 

---
**Порядок сборки источников конфигурации `app.Configuration`:**
1. Установка провайдера `ChainedConfigurationProvider` (добавляет `IConfiguration` в качестве источника и соединяет все далее применяемые провайдеры в одну цепочку).
2. `appsettings.json`
3. `appsettings.[Environment].json`, где `[Environment]` - название окружения (`Production`, `Development`).
4. Конфигурация App secrets (секретные настройки) - если окружение "Development"
5. Переменные среды
6. Аргументы командной строки

Если разные источники конфигурации содержат одинаковые ключи, то используется значение, последнего добавленного источника конфигурации.

**Пример объединения конфигураций:**
```csharp
var builder = WebApplication.CreateBuilder();
var app = builder.Build();
 
builder.Configuration
    .AddJsonFile("config.json")
    .AddXmlFile("config.xml")
    .AddIniFile("config.ini")
    .AddInMemoryCollection(new Dictionary<string, string>
{
    { "name", "Sam"},
    { "age", "32"}
}); ;
 
app.Map("/", (IConfiguration appConfig) => $"{appConfig["name"]} - {appConfig["age"]}");
 
app.Run();
```

### Outer links:
https://metanit.com/sharp/aspnet6/6.4.php