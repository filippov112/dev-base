#lang #lang-c_sharp 

# 2. Results. Текст и json в ASP.NET Core

### Content()
Текстовое содержимое.
- `content` - сам текст
- `contentType` - MIME-тип ответа (text/plain)
- `contentEncoding` - кодировка (utf-8)

```csharp
public static IResult Content (string content, string? contentType = default, System.Text.Encoding? contentEncoding = default);
```

```csharp
var builder = WebApplication.CreateBuilder();
var app = builder.Build();
 
app.Map("/", () => Results.Content("你好", "text/plain", System.Text.Encoding.Unicode));
app.Map("/", () => Results.Content("Hello ASP.NET Core"));
 
app.Run();
```

---
### Text()
Текстовое содержимое. Параметры те же что и у `Content()`.

```csharp
public static IResult Text (string content, string? contentType = default, System.Text.Encoding? contentEncoding = default);
```

```csharp
var builder = WebApplication.CreateBuilder();
var app = builder.Build();
 
app.Map("/chinese", () => Results.Text("你好", "text/plain", System.Text.Encoding.Unicode));
app.Map("/", () => Results.Text("Hello World"));
 
app.Run();
```

### Json()
Отправляет данные в json-формате.
- `data`: объект
- `options`:  `System.Text.Json.JsonSerializerOptions?` параметры сериализации
- `contentType`: тип содержимого в виде строки. (`application/json; charset=utf-8`)
- `statusCode`: код статуса. (200)

```csharp
public static IResult Json (object? data, JsonSerializerOptions? options = default, string? contentType = default, int? statusCode = default);
```

```csharp
app.Map("/sam", () => Results.Json(new Person("Sam", 25),
        new()
        {
            PropertyNameCaseInsensitive = false,
            NumberHandling = System.Text.Json.Serialization.JsonNumberHandling.WriteAsString
        }));
 
app.Map("/bob", () => Results.Json(new Person("Bob", 41), 
        new(System.Text.Json.JsonSerializerDefaults.Web))); 
 
app.Map("/tom", () => Results.Json(new Person("Tom", 37),
         new(System.Text.Json.JsonSerializerDefaults.General)));

app.Map("/error", () => Results.Json(new {message="Unexpected error"}, statusCode: 500));

//record class Person(string Name, int Age);
```

### Outer links:
https://metanit.com/sharp/aspnet6/10.2.php