#lang #lang-c_sharp 
# <font color="#00b0f0">EF Core:</font> Поля

EF Core поддерживает использование полей класса (включая приватные) для сопоставления с колонками БД
**Преимущества:**
1. Полная инкапсуляция данных
2. Возможность использования неизменяемых объектов
3. Поддержка legacy-кода с приватными полями

---
Для работы с полями необходимо использовать **Fluent API** в методе `OnModelCreating`:
1. `Property("fieldName")` - указывает, что поле должно быть включено в модель
2. `HasField("fieldName")` - связывает свойство с конкретным полем

```csharp
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    // Сопоставление полей с колонками БД
    modelBuilder.Entity<User>().Property("Id").HasField("id");
    modelBuilder.Entity<User>().Property("Age").HasField("age");
    modelBuilder.Entity<User>().Property("name");  // Поле без свойства
}
```

```csharp
//- Поле `id` будет автоматически заполняться при добавлении в БД
//- Поля `name` и `age` устанавливаются через конструктор
//- Для доступа к данным используются только методы класса (например, Print())
public class User
{
    int id;          // Приватное поле
    string name;     // Приватное поле
    int age;         // Приватное поле
    
    public int Id => id;    // Свойство только для чтения
    public int Age => age;  // Свойство только для чтения
    
    public User(string name, int age)  // Конструктор
    {
        this.name = name;
        this.age = age;
    }
    
    public void Print() => Console.WriteLine($"{id}. {name} - {age}");
}
```

---
### Outer links:
https://metanit.com/sharp/efcore/2.5.php