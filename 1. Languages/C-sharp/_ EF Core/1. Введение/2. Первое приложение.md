#lang #lang-c_sharp

---
1. <font color="#de7802">Ставим .NET SDK</font>
2. <font color="#de7802">Ставим инструменты EF Core:</font>
	```bash
	dotnet tool install --global dotnet-ef
	```

3. <font color="#e36c09">Подключаем [Пакеты EF Core](1.%20Languages/C-sharp/_%20EF%20Core/_/Пакеты%20EF%20Core.md):</font>
	```bash
	dotnet add package Microsoft.EntityFrameworkCore
	dotnet add package Microsoft.EntityFrameworkCore.SqlServer
	dotnet add package Microsoft.EntityFrameworkCore.Design
	dotnet add package Microsoft.EntityFrameworkCore.Tools
	```

4. <font color="#e36c09">Описываем классы моделей данных.</font>
	- [Ручной запуск реинжиниринга базы в EF Core](1.%20Languages/C-sharp/_%20EF%20Core/_/Ручной%20запуск%20реинжиниринга%20базы%20в%20EF%20Core.md)
	- Имена типа `[Имя_класса]Id` (то есть `UserId`) - первичные ключи по ум.
	```csharp
	public class User 
	{ 
		public int UserId { get; set; } 
		public string Name { get; set; } = string.Empty; 
		public int Age { get; set; }
	}
	```

5. <font color="#e36c09">[Создаем **класс контекста данных**](1.%20Languages/C-sharp/_%20EF%20Core/1.%20Введение/3.%20Контекст%20БД.md)</font>
	```csharp
	// Пример подключения к SQLite
	
	using Microsoft.EntityFrameworkCore;
	 
	public class ApplicationContext : DbContext
	{
	    public DbSet<User> Users => Set<User>(); // аналог = null! // - для обхода стат. анализа кода на пустое ссылочное свойство
	    public ApplicationContext() => Database.EnsureCreated();
	 
	    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
	    {
	        optionsBuilder.UseSqlite("Data Source=helloapp.db");
	    }
	}
	```

6. <font color="#e36c09">Подключим [Логирование](1.%20Languages/C-sharp/_%20EF%20Core/1.%20Введение/5.%20Логирование.md)</font>
	<br>
7. <font color="#e36c09">Применим [Миграции](1.%20Languages/C-sharp/_%20EF%20Core/1.%20Введение/6.%20Миграции.md)</font>
	<br>
8. <font color="#e36c09">Используем контекст для подключения к базе.</font>
	- [Операции](1.%20Languages/C-sharp/_%20EF%20Core/1.%20Введение/4.%20Операции.md)
	```csharp
	using (ApplicationContext db = new ApplicationContext())
	{
	    // создаем два объекта User
	    User tom = new User { Name = "Tom", Age = 33 };
	    User alice = new User { Name = "Alice", Age = 26 };
	 
	    // добавляем их в бд
	    db.Users.Add(tom);
	    db.Users.Add(alice);
	    db.SaveChanges();
	    Console.WriteLine("Объекты успешно сохранены");
	 
	    // получаем объекты из бд и выводим на консоль
	    var users = db.Users.ToList();
	    Console.WriteLine("Список объектов:");
	    foreach (User u in users)
	    {
	        Console.WriteLine($"{u.Id}.{u.Name} - {u.Age}");
	    }
	}
	```


### Outer links:
https://metanit.com/sharp/efcore/1.2.php