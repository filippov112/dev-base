#lang #lang-c_sharp 

---
**Скомпилированные запросы** позволяют:  
- Кэшировать запросы в форме, понятной для источника данных.  
- Повысить производительность приложения за счёт однократной компиляции и многократного выполнения.  

**Преимущества перед автоматической компиляцией EF Core**  
  - Исключают вычисление хэша LINQ-выражения и поиск в кэше.  
  - Позволяют вызывать запросы через делегаты.  

Синтаксис:
```csharp  
делегат = EF.CompileQuery((параметры) => выражения_LINQ)  
```  
Пример:  
```csharp  
Func<ApplicationContext, int, User?> userById =  
    EF.CompileQuery((ApplicationContext db, int id) =>  
        db.Users.Include(c => c.Company).FirstOrDefault(c => c.Id == id));  


User? u = userById(db, 21);
```  


---
### Outer links:
https://metanit.com/sharp/efcore/8.1.php