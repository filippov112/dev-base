#lang #lang-c_sharp

---
**Ограничения обобщений** применяются когда от универсального параметра требуется наличие конкретного функционала.

**Схемы:**
```csharp
class имя_класса<T> where T: тип_ограничения
```

```csharp
имя_метода<T>(параметры) where T: тип_ограничения
```

> При вызове метода нам необязательно указывать тип в угловых скобках - компилятор на основании переданного значения сам определит каким типом типизиуется метод, однако это можно сделать и явно:
> 
> ```csharp
> SendMessage(new EmailMessage("Bye World"));
> SendMessage<EmailMessage>(new EmailMessage("Bye World"));
> ```


**Типы:**
- *Классы*  / использовать в качестве ограничения конкретные *структуры* в отличие от классов **нельзя**
- *Интерфейсы* 
- `class` - универсальный параметр должен представлять класс 
- `struct` - универсальный параметр должен представлять структуру  
- `new()` - универсальный параметр должен представлять тип, который имеет общедоступный (public) конструктор без параметров

**Порядок указания ограничений:**
1. Название класса |`class` |`struct`. 
2. Названия интерфейсов (в отличие от класса, число неограничено)
3. `new()`
Все условия суммируются (&&)

```csharp
class Smartphone<T> where T: Messenger, new()
{
  
}
```
---
### Примеры

**На несколько параметров сразу:**
```csharp
class Messenger<T, P> 
    where T : Message
    where P: Person
{
    public void SendMessage(P sender, P receiver, T message)
    {
        Console.WriteLine($"Отправитель: {sender.Name}");
        Console.WriteLine($"Получатель: {receiver.Name}");
        Console.WriteLine($"Сообщение: {message.Text}");
    }
}
class Person
{
    public string Name { get;}
    public Person(string name) => Name = name;
}
 
class Message
{
    public string Text { get; } // текст сообщения
    public Message(string text) =>  Text = text;
}
```

**Классы:**
```csharp
class Messenger<T> where T : Message
{
    public void SendMessage(T message)
    {
        Console.WriteLine($"Отправляется сообщение: {message.Text}");
    }
}
 
class Message
{
    public string Text { get; } // текст сообщения
    public Message(string text)
    {
        Text = text;
    }
}
class EmailMessage : Message
{
    public EmailMessage(string text) : base(text) { }
}
```


**Методы:**
```csharp
SendMessage(new Message("Hello World"));
SendMessage(new EmailMessage("Bye World"));
 
void SendMessage<T>(T message) where T: Message
{
    Console.WriteLine($"Отправляется сообщение: {message.Text}");
}
class Message
{
    public string Text { get; } // текст сообщения
    public Message(string text)
    {
        Text = text;
    }
}
class EmailMessage : Message
{
    public EmailMessage(string text) : base(text) { }
}
```
### Inner links:
[1. Generic Типы](1.%20Languages/C-sharp/0.%20Введение/2.%20Универсальные%20типы/1.%20Generic%20Типы.md)


### Outer links:




