#Csharp

# Модификаторы доступа

**Все типы и члены типов** имеют *уровень доступности*, определяющий возможность их использования из другого кода в вашей или в других сборках. 
[Сборка(проект)](https://learn.microsoft.com/ru-ru/dotnet/standard/glossary#assembly) - *.dll* или *.exe*, созданные путем компиляции одного или нескольких .cs файлов в одной компиляции. 

### Границы
- [public](https://learn.microsoft.com/ru-ru/dotnet/csharp/language-reference/keywords/public):  **любая сборка** 
- [private](https://learn.microsoft.com/ru-ru/dotnet/csharp/language-reference/keywords/private):  **конкретный тип**
- [protected](https://learn.microsoft.com/ru-ru/dotnet/csharp/language-reference/keywords/protected):  **конкретный тип** или **производный тип в любой сборке**
- [internal](https://learn.microsoft.com/ru-ru/dotnet/csharp/language-reference/keywords/internal):  **конкретная сборка**
- [protected internal](https://learn.microsoft.com/ru-ru/dotnet/csharp/language-reference/keywords/protected-internal):  **конкретная сборка** или **производный тип в любой сборке**
- [private protected](https://learn.microsoft.com/ru-ru/dotnet/csharp/language-reference/keywords/private-protected):  **конкретный тип** или **производный тип** в **конкретной сборке**
- [file](https://learn.microsoft.com/ru-ru/dotnet/csharp/language-reference/keywords/file):  **файл**
	Модификатор `file` доступен только для типов верхнего уровня (не производных)

### Допустимость границ

|Граница|`public`|`protected`<br>`internal`|`protected`|`internal`|`private`<br>`protected`|`private`|`file`|
|---|---|---|---|---|---|---|---|
|Файл|✔️️|✔️|✔️|✔️|✔️|✔️|✔️|
|Содержащий класс|✔️️|✔️|✔️|✔️|✔️|✔️|❌|
|Производные классы (тот же проект)|✔️|✔️|✔️|✔️|✔️|❌|❌|
|Не производные классы (тот же проект)|✔️|✔️|❌|✔️|❌|❌|❌|
|Производные классы (другие проекты)|✔️|✔️|✔️|❌|❌|❌|❌|
|Не производные классы (другие проекты)|✔️|❌|❌|❌|❌|❌|❌|

## Разрешения
\*ПИ - пространство имен
- *Классы и структуры, объявленные напрямую в ПИ* - `public`, `internal`, `file`. 
	По умолчанию - `internal`.
- *Члены структур* - `public`, `internal`, `private`. не поддерживают все `protected` модификаторы доступа (отсутствует наследование)
- *Члены классов* -  `public`, `protected internal`, `protected`, `internal`, `private protected`, `private`. 
	По умолчанию - `private`.
- *Производные классы* - <= (локальнее) базовые классы.
- *Интерфейсы, объявленные напрямую в ПИ* - `public`, `internal`.
	По умолчанию - `internal`
- *Члены интерфейсов* - любой
	По умолчанию - `public`
- *Делегаты* по умолчанию - `internal`
- *Пользовательские операторы* - всегда `public static`

> [!note]
> Возвращаемый тип метода (свойства) должен быть таким же или более открытым чем сам метод (свойство).

### Правила

> Обычно доступность **члена** не превышает доступность **типа**, который его содержит. 
> *Однако **public-член** **internal-класса** может быть доступен извне сборки*, если член реализует методы интерфейса или переопределяет виртуальные методы, которые определены в открытом базовом классе.

> Модификатор записи ([Records](1.%20Languages/C-sharp/0.%20Введение/_Особые%20типы/Records.md)) на типе заставляет компилятор синтезировать дополнительные члены. Модификатор записи не влияет на доступность по умолчанию ни для класса записи, ни для структуры записи.

> Модификаторы [частичных классов и структур](1.%20Languages/C-sharp/0.%20Введение/2.%20Классовые%20механизмы/4.%20Частичные%20классы.md) должны совпадать.

> Финализаторы, а также члены `enum` не могут иметь модификаторов доступа.