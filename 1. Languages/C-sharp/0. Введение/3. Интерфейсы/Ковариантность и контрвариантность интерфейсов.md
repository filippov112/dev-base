#Csharp  

# Ковариантность и контрвариантность интерфейсов

- **Ковариантность**: позволяет использовать более конкретный тип, чем заданный изначально  
- **Контравариантность**: позволяет использовать более универсальный тип, чем заданный изначально
- **Инвариантность**: позволяет использовать только заданный тип

По умолчанию все обобщенные интерфейсы являются *инвариантными*.

### Ковариантные интерфейсы
Обобщенные интерфейсы могут быть ковариантными, если к универсальному параметру применяется ключевое слово `out` и данный параметр представляет только *возвращаемые типы*.

### Контрвариантные интерфейсы
Обобщенные интерфейсы могут быть контрвариантными, если к универсальному параметру применяется ключевое слово `in` и данный параметр представляет только *типы аргументов*.

### Примеры:
**Ковариантный**
```csharp
interface IMessenger<out T>
{
    T WriteMessage(string text);
}
class EmailMessenger : IMessenger<EmailMessage>
{
    public EmailMessage WriteMessage(string text)
    {
        return new EmailMessage($"Email: {text}");
    }
}

IMessenger<Message> outlook = new EmailMessenger(); // Message = EmailMessage
Message message = outlook.WriteMessage("Hello World");
 
IMessenger<EmailMessage> emailClient = new EmailMessenger();
IMessenger<Message> messenger = emailClient; // Message = EmailMessage
Message emailMessage = messenger.WriteMessage("Hi!");
```

**Контрвариантный**
```csharp
interface IMessenger<in T>
{
    void SendMessage(T message);
}
class SimpleMessenger : IMessenger<Message>
{
    public void SendMessage(Message message)
    {
        Console.WriteLine($"Отправляется сообщение: {message.Text}");
    }
}

IMessenger<EmailMessage> outlook = new SimpleMessenger(); // EmailMessage = Message
outlook.SendMessage(new EmailMessage("Hi!"));
 
IMessenger<Message> telegram = new SimpleMessenger();
IMessenger<EmailMessage> emailClient = telegram; // EmailMessage = Message
emailClient.SendMessage(new EmailMessage("Hello"));
```

### Внутренние ссылки:
[1.3. Ковариантность и контрвариантность делегатов](1.%20Languages/C-sharp/0.%20Введение/3.%20Делегаты/1.3.%20Ковариантность%20и%20контрвариантность%20делегатов.md)
[1. Интерфейсы](1.%20Languages/C-sharp/0.%20Введение/3.%20Интерфейсы/1.%20Интерфейсы.md)