#JS #DOM

# 18. Навигация и обработка элементов форм

```html
<form name="reg">
	<p><input name="user" value="" /></p>
	<p>
	    <input name="sex" type="radio" checked />М
	    <input name="sex" type="radio" />Ж
	</p>
	<p>Город: 
	    <select name="city">
	        <option>Москва</option>
	        <option>Санкт-Петербург</option>
	        <option>Тверь</option>
	    </select>
	</p>
	<p>Согласие <input name="agree" type="checkbox" /></p>
	<p><textarea name="about" rows="10" cols="30">О себе</textarea></p>
	<p><input type="submit" name="submit"></p>
</form>
```

1. Доступ к любой форме на странице можно получить через коллекцию `document.forms` по её порядковому номеру (от 0) или по имени (`name`):
    ```javascript
    let frm = document.forms[0];
    let frm = document.forms.reg;
    ```

2. Каждый элемент формы, в свою очередь, доступен через коллекцию `form.elements`. Но можно слово `elements` опускать:
    ```javascript
    let user = frm.elements[0];
    let user = frm.elements.user;
    ```

- Обратите внимание, что теги, не относящиеся к элементам формы, игнорируются.
- Если имеется несколько элементов с **одинаковым именем** (в нашем случае – это **радио** `sex` для выбора пола пользователя), то возвращается **коллекция** соответствующих элементов:
    ```javascript
    let sex = frm.elements.sex;
    console.dir(sex);
    ```

И, далее, к каждому конкретному элементу можно обратиться по индексу:
```javascript
console.dir(sex[0]);
```

3. Каждый элемент формы имеет ссылку на саму форму, которой он принадлежит:
    ```javascript
    console.dir(user.form);
    ```

## Доступ к значениям полей форм

### input и textarea
- `input.value` – значение атрибута `value`;
- `input.checked` – значение атрибута `checked`;
- `textarea.value` – содержимое поля `textarea`.

### select
- `select.options` – коллекция из подэлементов `<option>`;
- `select.value` – значение выбранного в данный момент `<option>`;
- `select.selectedIndex` – номер выбранного `<option>`.

Последние 2 свойства редактируемы:
```javascript
city.value = "Тверь";
city.selectedIndex = 1;
```

### select.options

Если наш список имеет режим множественного выбора:
```html
<select name="city" multiple>
```

Осуществлять выбор элементов необходимо через `options`:
```javascript
city.options[1].selected = true;
city.options[2].selected = true;
```

### Примеры взаимодействия с options:

**Выбор всех отмеченных пунктов:**
```javascript
let selected = Array.from(city.options)
      .filter(option => option.selected);

for (let c of selected) {
    console.log(c);
}
```

**Выбор значений отмеченных пунктов:**
```javascript
let selected = Array.from(city.options)
      .filter(option => option.selected)
      .map(option => option.value);
```
