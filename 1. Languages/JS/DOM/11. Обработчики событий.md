#lang #lang-js 

# 11. Обработчики событий

### _Типы событий_

- Пользователь кликает мышкой по HTML-странице (`onclick`);
- Пользователь перемещает курсор мыши (`mousemove`);
- Пользователь нажимает на клавишу клавиатуры (`keydown/keyup`);
- Когда полностью загружается HTML-документ (`DOMContentLoaded`).

**Обработчик события** – функция, привязанная к событию.

### _Подключение через атрибут:_ 
(вызываем через анонимную функцию)

```html
<a id="link" href="#" onclick="showMessage()">Нажми меня</a>
```

```javascript
function showMessage() {
    alert("Hello!");
}
```

Наглядное представление присвоения…

```javascript
a.onclick = function(event) {
    showMessage();
}
```

### _Подключение программно:_ 
(передаем ссылку на обработчик)

```html
<input type="button" value="Событие onclick" />
```

```javascript
let inp = document.querySelector("input");
inp.onclick = showMessage;
```

Сброс обработчика…

```javascript
inp.onclick = null;
```

### _THIS_

В теле каждой функции-обработчика можно использовать ключевое слово **this**, которое ссылается на **элемент DOM-дерева**, на котором висит этот обработчик.

```javascript
function showMessage() {
    alert(this.tagName); // для программного подключения
}
```

```javascript
function showMessage(event) {
    alert(event.currentTarget.tagName); // через атрибут
}
```

### _Что содержит объект event?_

- `event.currentTarget` - содержит ссылку на узел DOM-дерева, из которого пришло событие.
- `event.type` – тип события (например, для `onclick` будет содержать строку «click»);
- `event.clientX / event.clientY` – координаты мыши в момент возникновения события (относительно границ окна браузера).
- И др.

### _AddEventListener – множества обработчиков_

```javascript
element.addEventListener(event, handler[, options]); 
```

Позволяет задать **несколько** обработчиков для **одного** события **одного** элемента.
- **event** – строка с названием события;
- **handler** – ссылка на функцию-обработчик;
- **options** – необязательный параметр.

```javascript
inp.addEventListener("click", showMessage);
```

```javascript
element.removeEventListener(event, handler[, options]); 
```

Используется для удаления обработчиков, подключенных способом выше.

```javascript
inp.removeEventListener("click", showMessage);
```

- Множественные обработчики не связаны с одиночным подключением. Они работают по отдельности. Полагается выбирать либо тот, либо другой вариант.
- Не стоит добавлять таким методом анонимные функции, поскольку их не получится удалить таким способом.
- Также некоторым событиям можно назначать обработчики только с помощью метода `addEventListener`. Например, событию `transitionend`, которое возникает при завершении CSS-анимации.

### _Объекты и классы обработчики_

```javascript
inp.addEventListener("click", {
    handleEvent(event) {
        console.log("Событие: " + event.type);
    }
});
```

```javascript
class MyHandler {
    handleEvent(event) {
        console.log("Событие: " + event.type);
    }
}

let inp = document.querySelector("input");
inp.addEventListener("click", new MyHandler());
```
