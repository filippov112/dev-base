#JS #DOM

# 6. Создание и добавление элементов DOM

### Создание элементов

1. Чтобы создать **элемент div**, воспользуемся методом `document.createElement(tag)` и пропишем его так:

   ```javascript
   let div = document.createElement('div');
   ```

   Далее, укажем класс стилей и содержимое:

   ```javascript
   div.className = "msg";
   div.innerHTML = "Важная информация!";
   ```

2. Можно создавать и **текстовые** элементы. Для этого следует использовать метод `document.createTextNode(text)`:

   ```javascript
   let textNode = document.createTextNode('Текстовый элемент');
   document.body.append(textNode);
   ```

3. Следующий метод `cloneNode` позволяет создавать **клон узла** DOM-дерева. Он имеет следующий синтаксис: `elem.cloneNode(flDeep);`
   - Если `flDeep` равен **true**, то создается «глубокий» клон объекта со всеми его свойствами и дочерними элементами.
   - При значении **false** получаем клон без дочерних элементов.

### Добавление элементов на страницу

1. **Основные методы:**
   - `node.prepend(...nodes or strings)` – вставляет узлы или строки в начало node;
   - `node.append(...nodes or strings)` – вставляет узлы или строки в конец node;
   - `node.before(...nodes or strings)` – вставляет узлы или строки до node;
   - `node.after(...nodes or strings)` – вставляет узлы или строки после node;
   - `node.replaceWith(...nodes or strings)` – заменяет node заданными узлами или строками.

   - Эти методы могут вставлять не только объекты-теги, но и текстовые элементы как строки.
   - Они могут принимать сразу более одного аргумента для вставки **нескольких элементов**.
   - Позволяют также перемещать уже существующие элементы. То есть, когда мы вставляем имеющийся элемент, он автоматически удаляется со своего прежнего места и добавляется в новое.

   ```javascript
   document.body.append(div);
   ```

2. `elem.insertAdjacentHTML(where, html)` – вставляют текст вместе с обработкой находящихся в нем тегов, в отличие от предыдущих методов. Здесь `where` может принимать значения:
   - **"beforebegin"** – для вставки html непосредственно перед elem;
   - **"afterbegin"** – для вставки html как первого дочернего элемента в elem;
   - **"beforeend"** – для вставки html как последнего дочернего элемента в elem;
   - **"afterend"** – для вставки html непосредственно после elem.

   ```javascript
   list.insertAdjacentHTML("beforebegin", "Список планет<hr>");
   ```

   Существует еще два похожих метода, но более специализированных:
   - `insertAdjacentText(where, text)` – для вставки строки текста `text`;
   - `insertAdjacentElement(where, elem)` – для вставки элемента `elem`.

3. **`document.write(html);`** - позволяет добавлять HTML-содержимое в то место, где записан.

   - **_Причем,_** срабатывает этот метод **только в момент загрузки страницы**. Если вызвать его **после загрузки**, то все содержимое HTML-документа будет **удалено!**

   ```javascript
   document.write('<p>Строка вставленная методом write</p>');
   ```

### Удаление узлов со страницы

1. Если нам нужно удалить какой-либо узел из DOM-дерева, то для этого часто используется метод `node.remove()`.

### Устаревшие методы вставки (или редко используемые)

- **DocumentFragment** - образует **фрагмент документа** со своим DOM-деревом, то есть, со своим содержимым. Затем, это содержимое можно целиком вставить в любое место HTML-документа.

   ```javascript
   let fr = new DocumentFragment();
   let ul = document.querySelector("ul");
   fr.append(item);
   ul.append(fr);
   ```

- `parent.appendChild(node)` – **добавляет элемент в конец** списка дочерних элементов;
- `parent.insertBefore(node, nextSibling)` – **вставляет элемент перед** `nextSibling`;
- `parent.removeChild(node)` – **удаляет** элемент `node` (здесь `parent` является родителем `node`);
- `parent.replaceChild(newElem, node)` – **заменяет дочерний элемент** `node` на новый `newElem`.
