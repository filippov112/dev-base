#JS

# 22. Деструктурирующее присваивание

```javascript
let [car1, car2, car3] = ["yaguar", "porshe", "mercedes"];

let [car1, , car2] = ["yaguar", "porshe", "mercedes"];

let [fr1, fr2, ...last] = ["Груша", "Слива", "Яблоко", "Персик", "Виноград"];

let [fr1, fr2, fr3, fr4] = ["Груша", "Слива"]; // - undefined

let [fr1, fr2, fr3 = "Яблоко", fr4 = "Персик"] = ["Груша", "Слива"];

let [name = prompt('name?'), lastname = prompt('lastname?')] = ["Иван"];

let [a1, a2, a3, a4] = "Иван";
```

Очень удобно использовать деструктурирующее присваивание для перебора свойств объекта:

```javascript
for (let [key, value] of Object.entries(car)) {
    console.log(`car[${key}] = ${value}`);
}
```

Для перебора свойств коллекции `Map` можно использовать такой же подход:

```javascript
let car = new Map();

car.set("model", "toyota")
   .set("color", 0xaf)
   .set("price", 1000);

for (let [key, value] of car) {
    console.log(`car[${key}] = ${value}`);
}
```

## Деструктурирующее присваивание с объектами

Например, имеется объект:

```javascript
let args = {
    width: 100,
    height: 200,
    tag: "div",
    class: "div-id"
};
```

И далее, указываем свойства, которые хотим **выбрать** из этого объекта:

```javascript
let {width, tag, height} = args;
console.log(width, tag, height);
```

Можно указывать альтернативные имена для взаимодействия:

```javascript
let {width: w, tag, height: h} = args;
```

Здесь также, как и в случае с массивами, можно использовать аргументы **по умолчанию**:

```javascript
let {width: w = 0, tag, height: h = 0} = {tag: "span"};
```

Если мы выбираем только часть свойств из объекта, то оставшиеся можно поместить в объект, используя для его объявления **троеточие**:

```javascript
let {width, height, ...last} = args;
```

Можно использовать уже существующие переменные:

```javascript
let width, height;
({width, height} = args); // указываем в скобках, чтобы не получился просто блок кода
console.log(width, height);
```

Наконец, если объект или массив имеют более сложную структуру, например, такую:

```javascript
let args = {
    tag: "div",
    class: "div-class",
    size: {width: 100, height: 200}
};
```

То для деструктурирующего присваивания можно использовать более сложные шаблоны:

```javascript
let {
    size: {width, height},
    class: cl
} = args;

console.log(width, height, cl);
```

## Использование объектного метода в аргументах функций

При определении функции с множеством аргументов нужно помнить **точный порядок всех свойств** (в отличие от Питона, **нельзя использовать** именованное определение свойств). Поэтому использование деструктурирующего присваивания часто применяется при задании аргументов функций.

```javascript
function showMenu({title = "Untitled", width = 200, height = 100, items = []} = {}) { // указываем пустой объект по ум. для вызова без аргументов
    console.log(title);
    console.log(width, height);
    console.log(items);
}
```

А сами аргументы описать с помощью объекта:

```javascript
let args = {
    title: "Заголовок меню",
    items: ["Пункт 1", "Пункт 2", "Пункт 3"]
};
```

Теперь можно вызвать функцию с этими параметрами:

```javascript
showMenu(args);
```
