–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞

```csharp
builder.Services.AddSingleton<IAuthorizationHandler, MinimumAgeHandler>();
```

–æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `IAuthorizationHandler`. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã ASP.NET Core –∑–Ω–∞–ª, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ `MinimumAgeRequirement`.

üìå **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?**
–ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π, —Å–æ–¥–µ—Ä–∂–∞—â–µ–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö `IAuthorizationHandler`, —á—Ç–æ–±—ã –æ–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∏–ª–∏, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ. –ë–µ–∑ —ç—Ç–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω ‚Äî –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –ø—Ä–æ–≤–∞–ª–∏–≤–∞—Ç—å—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–¥—Ö–æ–¥—è—Ç.

---

### ü§î –ß—Ç–æ –µ—Å–ª–∏ —É –Ω–∞—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤?

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∏–∑ –∫–æ—Ä–æ–±–∫–∏. –ö–∞–∂–¥—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```csharp
builder.Services.AddSingleton<IAuthorizationHandler, MinimumAgeHandler>();
builder.Services.AddSingleton<IAuthorizationHandler, CountryRequirementHandler>();
builder.Services.AddSingleton<IAuthorizationHandler, CustomRequirementHandler>();
```

–ò–ª–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `AddScoped` –∏–ª–∏ `AddTransient` –≤–º–µ—Å—Ç–æ `AddSingleton`, –µ—Å–ª–∏ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `DbContext` –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å –º–µ–Ω—å—à–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏.

–í–æ –≤—Ä–µ–º—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ASP.NET Core:

1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ `[Authorize(Policy = "...")]`
    
2. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –≤—Å–µ `IAuthorizationRequirement` –∏–∑ —ç—Ç–∏—Ö –ø–æ–ª–∏—Ç–∏–∫
    
3. –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ **–≤—Å–µ–º –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º `IAuthorizationHandler`** –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `HandleRequirementAsync()` —É —Ç–µ—Ö, —á—å–∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —Ç–∏–ø–∞–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
    

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–∞–ª–∏—á–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤: –∫–∞–∂–¥—ã–π –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω —Ç–æ–ª—å–∫–æ –ø–æ —Å–≤–æ–µ–º—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é.

---

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ–¥–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `AuthorizationHandler<Requirement1, Requirement2>`, –ª–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `IAuthorizationHandler` –Ω–∞–ø—Ä—è–º—É—é –∏ –≤ `HandleAsync()` –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Å–µ –Ω—É–∂–Ω—ã–µ —Ç–∏–ø—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.