#lang #lang-python #flask

---
**Blueprint** (эскизы) — независимые модули, на которые во Flask можно разделять проект. Примеры модулей:
- Авторизация
- Админ-панель
- Подсчет числа просмотров страниц
- И так далее...

---

### Пример создания простейшей админ-панели

#### Структура каталога:
```
admin
│
├── templates/admin   # файлы шаблонов (при сборке проекта все шаблоны из templates сохраняются в одном каталоге. 
│                     # Чтобы исключить смешение шаблонов, добавляйте их в подкаталог)
│
├── static            # файлы оформления: CSS, JS, изображения и другие статические данные
│
└── admin.py          # файл реализации
```

---

### Импорт класса Blueprint

В начале выполним импорт класса `Blueprint`:

```python
from flask import Blueprint
```

Затем создадим экземпляр этого класса:

```python
admin = Blueprint('admin', __name__, template_folder='templates', static_folder='static')
```

- `'admin'` – имя Blueprint, которое будет суффиксом ко всем именам методов данного модуля.
- `__name__` – имя исполняемого модуля, относительно которого будет искаться папка `admin` и соответствующие подкаталоги (корневой каталог проекта).
- `template_folder` – подкаталог для шаблонов данного Blueprint (необязательный параметр).
- `static_folder` – подкаталог для статических файлов (необязательный параметр).

---

### Регистрация в основном приложении

Для регистрации Blueprint в основном приложении используется следующая команда:

```python
from admin.admin import admin

app.register_blueprint(admin, url_prefix='/admin')
```

- `url_prefix` — префикс для всех URL модуля `admin` (необязательный параметр).

---

### Главный обработчик модуля

```python
@admin.route('/')  # мы вызываем route для admin, а не app
def index():
    return "admin"
```

**URL определяется по правилу**:  
```
домен/<url_prefix>/<URL-blueprint>
```

### Исключение конфликта имён обработчиков

Это выполняется через точку:

- Пример: `admin.index` (для Blueprint `'admin'`)
- Локальный обработчик: `url_for('.index')`
  
Пример использования в шаблонах для файлов из каталога `static`:

```html
{{ url_for('.static', filename='css/styles.css') }}
```
