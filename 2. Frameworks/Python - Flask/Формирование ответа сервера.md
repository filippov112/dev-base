#lang #lang-python #flask

---
Во Flask заголовок в ответ на запрос можно формировать тремя способами:

1. **Возврат строки в обработчике:** 
   Возвращая строку, автоматически ответом будет `content-type=text/html` и код 200.

   ```python
   @app.route("/")
   def index():
       return render_template('index.html', menu=menu, posts=[])
   ```

2. **Использование функции `make_response()`:**  
   Общий шаблон:
   ```python
   res_obj = make_response(res_body, status_code=200)
   ```

   - `res_body` – передаваемое содержимое (контент);
   - `status_code` – код ответа сервера (по умолчанию 200).

   **Смысл:** У `response` есть словарь `header`, хранящий информацию для браузера об интерпретации страницы:

   | Код состояния | Описание                                   | Content-Type по умолчанию |
   |---------------|-------------------------------------------|---------------------------|
   | 200           | Все нормально                            | text/html                 |
   | 404           | Страница не найдена                      | text/plain                |
   | 301           | Выполнено перенаправление с другого URL | image/jpeg                |
   | 401           | Доступ запрещен                          | audio/mp4                 |
   |               |                                           | multipart/form-data       |

   ```python
   @app.route("/")
   def index():
       content = render_template('index.html', menu=menu, posts=[])
       res = make_response(content)
       res.headers['Content-Type'] = 'text/plain'
       res.headers['Server'] = 'flasksite'
       return res
   ```

3. **Возврат кортежа формата:**
   - `(response, status, headers)`
   - `(response, headers)`
   - `(response, status)`

   Где:
   - `response` — строка, представляющая собой тело ответа.
   - `status` — код состояния HTTP, который может быть указан в виде целого числа или строки.
   - `headers` — словарь со значениями заголовков.

   ```python
   @app.route("/")
   def index():
       return "<h1>Main Page</h1>", 200, {'Content-Type': 'text/plain'}
   ```

   По сути, это тот же 2-й способ, только короче.

---

## Перенаправление на другой адрес

- **301** – страница перемещена на другой постоянный URL-адрес.
- **302** – страница перемещена временно на другой URL-адрес.

```python
@app.route('/transfer')
def transfer():
    return redirect(url_for('index'), 301)
```
