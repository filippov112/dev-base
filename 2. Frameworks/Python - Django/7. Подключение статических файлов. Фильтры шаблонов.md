 #lang #lang-python #django

---
> Приложение может работать в двух режимах:
> 
> - **Отладки** – на тестовом веб-сервере.
> В режиме отладки статические файлы Django ищет во всех каталогах `static` приложений и во всех возможных каталогах `static` внешних модулей (например, админки).
> Статические файлы при отладке можно размещать в подкаталоге `static` нашего приложения.
> 
> - **Эксплуатации** – на реальном веб-сервере.
> В режиме эксплуатации реальный веб-сервер будет брать все статические файлы из папки `static`, расположенной в каталоге всего проекта.

---
#### Подготовка для режима эксплуатации

Для агрегации всех файлов приложений в одну папку выполняется команда терминала:

```bash
python manage.py collectstatic
```

После чего в конфигурации необходимо определить три константы:
- `STATIC_URL` – префикс URL-адреса для статических файлов.
- `STATIC_ROOT` – путь к общей статической папке, используемой реальным веб-сервером.
- `STATICFILES_DIRS` – список дополнительных (нестандартных) путей к статическим файлам.

Пример конфигурации:
```python
STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'static')
STATICFILES_DIRS = []
```

Так же, как и с шаблонами, при создании локального каталога `static` все файлы помещаются в подкаталог с именем приложения, а далее уже по типу файлов (`css`, `js`, `img`).

---
#### Подключение файлов к шаблону

Для подключения статических файлов в шаблонах используется тег `{% load static %}`. Он подключается в начале шаблона для распознавания статических файлов. Данный тег ссылается на параметр конфигурации `STATIC_URL` и добавляет префикс к ссылке.

Пример подключения CSS файла:
```html
<link href="{% static 'women/css/styles.css' %}" rel="stylesheet">
```

---
#### Фильтры текста

Пример использования фильтров текста:
```html
<p>{{ p.content|linebreaks|truncatewords:50 }}</p>
```

- `linebreaks` – вставляет тег перевода строки `<br>`, если строки следуют друг за другом, и тег абзаца `<p>`, если между строками имеется пустая строка.
- `truncatewords` – ограничивает число отображаемых слов.

Также, можно временно отключить экранирование тегов с помощью тега `{% autoescape off %}`:
```html
{% autoescape off %}
    {{ p.content|linebreaks|truncatewords:50 }}
{% endautoescape %}
```
