#devops #Kubernetes 

# Kubernetes: **Мониторинг и логирование** 

## 1. Мониторинг

**Prometheus** — open-source система мониторинга и сбора метрик. 
**Grafana** — инструмент визуализации данных в виде графиков и дашбордов.
**Алертинг** - позволяет автоматически уведомлять о возникновении проблем.

> - все *файлы* - файлы формата `.yaml`, применение осуществляется через `kubectl apply -f file_name.yaml`

1. *Файлы* манифестов для ***Prometheus*** и ***Grafana***
2. Открыть интерфейс *Grafana* и добавить *Prometheus* в качестве источника данных, указав его URL.
3. Импортировать готовые или создать свои дашборды для визуализации метрик.
4. *Файл* конфигурации ***Alertmanager*** с описанием правил оповещений и каналов доставки (например, email, Slack).
5. *Файл* правил срабатывания оповещений для ***Prometheus***.

## 2. Логирование

**Elasticsearch** - распределённая поисковая и аналитическая open-source система хранения и поиска данных в реальном времени. Часто используется для индексирования и поиска по большим объёмам логов.
**Fluentd** - open-source инструмент сбора, обработки и передачи логов. Агрегирует логи из различных источников и отправляет в хранилища данных, такие как *Elasticsearch*.
**Kibana** - open-source инструмент визуализации данных, интегрирующийся с *Elasticsearch*. Предоставляет веб-интерфейс для поиска, анализа и визуализации данных в *Elasticsearch*, позволяя создавать настраиваемые дашборды и отчёты.

> - Для облегчения сбора логов средствами K8s их лучше выводить в стандартные потоки вывода (`stdout` и `stderr`)
> - Можно использовать легковесные агенты логирования, такие как *Fluent Bit*, для сбора и передачи логов, чтобы снизить нагрузку на систему.

- **Сбор логов с помощью EFK-стека (Elasticsearch, Fluentd, Kibana)**
	1. *Файлы* манифестов ***Elasticsearch***, ***Fluentd***, ***Kibana***.
	2. Открыть веб-интерфейс *Kibana* и добавить индексный шаблон, соответствующий логам из *Fluentd*.
	3. Создать визуализации и дашборды для анализа логов.

- **Альтернативные решения для логирования**
	Например, *Grafana Loki* в сочетании с *Grafana* для сбора и визуализации логов.

### Outer links:

