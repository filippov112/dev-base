#devops #Kubernetes 

# Kubernetes: **Адаптация приложений** 

Для адаптации приложений к работе в Kubernetes с учётом *отказоустойчивости, масштабируемости и без состояния (stateless)* рекомендуется следовать следующим принципам:

1. **Разделение на микросервисы**: Разбейте монолитное приложение на независимые микросервисы, каждый из которых выполняет конкретную функцию. 
    
2. **Проектирование stateless-сервисов**: Стремитесь к созданию сервисов, не сохраняющих состояние между сессиями. Храните данные и состояние во внешних хранилищах, таких как базы данных или объектные хранилища. 
    
3. **Использование подходящих контроллеров Kubernetes**: 
	- Для stateless-приложений применяйте `Deployment`, обеспечивающий управление репликами и обновлениями. 
	- Для stateful-приложений используйте `StatefulSet`, который поддерживает сохранение состояния и уникальные идентификаторы для каждого пода.
    
4. **Настройка стратегий деплоя**: 
	- `RollingUpdate` обеспечивает постепенное обновление подов без простоев
	- `Recreate` останавливает все существующие поды перед созданием новых. 
    
5. **Обеспечение отказоустойчивости**: Размещайте реплики подов в разных зонах доступности и на разных узлах, используя `Pod Topology Spread Constraints` или `Affinity/Anti-Affinity` правила.
    
6. **Горизонтальное масштабирование**: Настройте `Horizontal Pod Autoscaler` для автоматического изменения количества реплик подов в зависимости от нагрузки. 
    
7. **Управление состоянием и хранилищем**: Для stateful-приложений используйте `PersistentVolume` и `PersistentVolumeClaim` для организации постоянного хранилища данных.

### Outer links:

