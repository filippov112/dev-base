#tool #tool-docker

---
**Docker Compose** — инструмент управления многоконтейнерными Docker-приложениями. 
Позволяет описывать конфигурацию всех сервисов приложения в одном YAML-файле и управлять ими.

---
#### 1. **Установка**
В *Docker Desktop* на Windows или macOS, он уже установлен. 
Для Linux необходимо установить его [отдельно](examples/Docker/Docker%20compose,%20Linux.md)

---
#### 2. **Создание файла docker-compose.yml**
В корневой директории проекта создайте файл `docker-compose.yml`, в котором опишите все необходимые сервисы. 

Пример:
```yaml
version: '3.9'
services:
  db:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: example
  wordpress:
    image: wordpress:latest
    ports:
      - "8000:80"
    environment:
      WORDPRESS_DB_HOST: db:3306
      WORDPRESS_DB_PASSWORD: example
```

---
#### 3. **Запуск всех сервисов**
```bash
docker-compose up
```
Флаг `-d` позволяет запустить сервисы в фоновом режиме:
```bash
docker-compose up -d
```

---
#### 4. **Управление сервисами**
- Просмотр запущенных сервисов:
    ```bash
    docker-compose ps
    ```
- Остановка всех сервисов:
    ```bash
    docker-compose stop
    ```
- Остановка и удаление всех сервисов вместе с их сетями:
    ```bash
    docker-compose down
    ```  

---
#### 5. **Масштабирование сервисов**
Например, чтобы запустить три экземпляра сервиса `web`:
```bash
docker-compose up -d --scale web=3
```

---
#### 6. **Использование переменных окружения**
Для гибкой настройки. 

Например:
`docker-compose.yml`:
```yaml
version: '3.9'
services:
  app:
    image: myapp:latest
    environment:
      - APP_ENV=${APP_ENV}
```

Значения переменных:
файл `.env` в корневой директории проекта:
```
APP_ENV=production
```
